"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/profile/route";
exports.ids = ["app/api/auth/profile/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "node:async_hooks":
/*!***********************************!*\
  !*** external "node:async_hooks" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("node:async_hooks");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fprofile%2Froute&page=%2Fapi%2Fauth%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fprofile%2Froute.js&appDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShareClerk_Supabase%5Cgroupshare-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShareClerk_Supabase%5Cgroupshare-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fprofile%2Froute&page=%2Fapi%2Fauth%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fprofile%2Froute.js&appDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShareClerk_Supabase%5Cgroupshare-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShareClerk_Supabase%5Cgroupshare-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_bacze_Project_GroupShareClerk_Supabase_groupshare_project_src_app_api_auth_profile_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/auth/profile/route.js */ \"(rsc)/./src/app/api/auth/profile/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/profile/route\",\n        pathname: \"/api/auth/profile\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/profile/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\bacze\\\\Project\\\\GroupShareClerk_Supabase\\\\groupshare-project\\\\src\\\\app\\\\api\\\\auth\\\\profile\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_bacze_Project_GroupShareClerk_Supabase_groupshare_project_src_app_api_auth_profile_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/auth/profile/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGcHJvZmlsZSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYXV0aCUyRnByb2ZpbGUlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZhdXRoJTJGcHJvZmlsZSUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNiYWN6ZSU1Q1Byb2plY3QlNUNHcm91cFNoYXJlQ2xlcmtfU3VwYWJhc2UlNUNncm91cHNoYXJlLXByb2plY3QlNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q2JhY3plJTVDUHJvamVjdCU1Q0dyb3VwU2hhcmVDbGVya19TdXBhYmFzZSU1Q2dyb3Vwc2hhcmUtcHJvamVjdCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDK0Q7QUFDNUk7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncm91cHNoYXJlLXByb2plY3QvPzA4YzciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcYmFjemVcXFxcUHJvamVjdFxcXFxHcm91cFNoYXJlQ2xlcmtfU3VwYWJhc2VcXFxcZ3JvdXBzaGFyZS1wcm9qZWN0XFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGF1dGhcXFxccHJvZmlsZVxcXFxyb3V0ZS5qc1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYXV0aC9wcm9maWxlL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYXV0aC9wcm9maWxlXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hdXRoL3Byb2ZpbGUvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxiYWN6ZVxcXFxQcm9qZWN0XFxcXEdyb3VwU2hhcmVDbGVya19TdXBhYmFzZVxcXFxncm91cHNoYXJlLXByb2plY3RcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcYXV0aFxcXFxwcm9maWxlXFxcXHJvdXRlLmpzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9hdXRoL3Byb2ZpbGUvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fprofile%2Froute&page=%2Fapi%2Fauth%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fprofile%2Froute.js&appDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShareClerk_Supabase%5Cgroupshare-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShareClerk_Supabase%5Cgroupshare-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/auth/profile/route.js":
/*!*******************************************!*\
  !*** ./src/app/api/auth/profile/route.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PATCH: () => (/* binding */ PATCH)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @clerk/nextjs/server */ \"(rsc)/./node_modules/@clerk/nextjs/dist/esm/app-router/server/currentUser.js\");\n/* harmony import */ var _lib_auth_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../lib/auth-service */ \"(rsc)/./src/lib/auth-service.js\");\n/* harmony import */ var _lib_clerk_supabase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../lib/clerk-supabase */ \"(rsc)/./src/lib/clerk-supabase.js\");\n\n\n\n\n/**\r\n * GET /api/auth/profile\r\n * Pobiera profil obecnie zalogowanego użytkownika, lub tworzy go jeśli nie istnieje\r\n */ async function GET() {\n    try {\n        // Użyj funkcji z auth-service\n        const userProfile = await (0,_lib_auth_service__WEBPACK_IMPORTED_MODULE_1__.getOrCreateUserProfile)();\n        if (!userProfile) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(userProfile);\n    } catch (error) {\n        console.error(\"Error in profile API:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"An unexpected error occurred\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n/**\r\n * PATCH /api/auth/profile\r\n * Aktualizuje profil zalogowanego użytkownika\r\n */ async function PATCH(request) {\n    try {\n        const user = await (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_3__.currentUser)();\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        // Pobierz profil użytkownika\n        const userProfile = await (0,_lib_auth_service__WEBPACK_IMPORTED_MODULE_1__.getOrCreateUserProfile)();\n        if (!userProfile) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Profile not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Pobierz dane z żądania\n        const updates = await request.json();\n        // Zablokuj modyfikację pól, których użytkownik nie powinien móc zmienić\n        const forbiddenFields = [\n            \"id\",\n            \"external_auth_id\",\n            \"email\",\n            \"verification_level\",\n            \"rating_avg\",\n            \"rating_count\",\n            \"created_at\"\n        ];\n        for (const field of forbiddenFields){\n            if (field in updates) {\n                delete updates[field];\n            }\n        }\n        // Get authenticated Supabase client\n        const supabaseAuth = await (0,_lib_clerk_supabase__WEBPACK_IMPORTED_MODULE_2__.getAuthenticatedSupabaseClient)(user);\n        // Aktualizuj profil\n        const { data: updated, error: updateError } = await supabaseAuth.from(\"user_profiles\").update({\n            ...updates,\n            updated_at: new Date().toISOString()\n        }).eq(\"id\", userProfile.id).select().single();\n        if (updateError) {\n            console.error(\"Error updating profile:\", updateError);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to update profile\",\n                details: updateError\n            }, {\n                status: 500\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(updated);\n    } catch (error) {\n        console.error(\"Error updating profile:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"An unexpected error occurred\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9hdXRoL3Byb2ZpbGUvcm91dGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTJDO0FBQ1E7QUFDbUI7QUFDVTtBQUVoRjs7O0NBR0MsR0FDTSxlQUFlSTtJQUNwQixJQUFJO1FBQ0YsOEJBQThCO1FBQzlCLE1BQU1DLGNBQWMsTUFBTUgseUVBQXNCQTtRQUVoRCxJQUFJLENBQUNHLGFBQWE7WUFDaEIsT0FBT0wscURBQVlBLENBQUNNLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87WUFBZSxHQUN4QjtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsT0FBT1IscURBQVlBLENBQUNNLElBQUksQ0FBQ0Q7SUFDM0IsRUFBRSxPQUFPRSxPQUFPO1FBQ2RFLFFBQVFGLEtBQUssQ0FBQyx5QkFBeUJBO1FBQ3ZDLE9BQU9QLHFEQUFZQSxDQUFDTSxJQUFJLENBQ3RCO1lBQUVDLE9BQU87WUFBZ0NHLFNBQVNILE1BQU1JLE9BQU87UUFBQyxHQUNoRTtZQUFFSCxRQUFRO1FBQUk7SUFFbEI7QUFDRjtBQUVBOzs7Q0FHQyxHQUNNLGVBQWVJLE1BQU1DLE9BQU87SUFDakMsSUFBSTtRQUNGLE1BQU1DLE9BQU8sTUFBTWIsaUVBQVdBO1FBQzlCLElBQUksQ0FBQ2EsTUFBTTtZQUNULE9BQU9kLHFEQUFZQSxDQUFDTSxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQWUsR0FDeEI7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLDZCQUE2QjtRQUM3QixNQUFNSCxjQUFjLE1BQU1ILHlFQUFzQkE7UUFFaEQsSUFBSSxDQUFDRyxhQUFhO1lBQ2hCLE9BQU9MLHFEQUFZQSxDQUFDTSxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQW9CLEdBQzdCO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSx5QkFBeUI7UUFDekIsTUFBTU8sVUFBVSxNQUFNRixRQUFRUCxJQUFJO1FBRWxDLHdFQUF3RTtRQUN4RSxNQUFNVSxrQkFBa0I7WUFBQztZQUFNO1lBQW9CO1lBQVM7WUFBc0I7WUFBYztZQUFnQjtTQUFhO1FBRTdILEtBQUssTUFBTUMsU0FBU0QsZ0JBQWlCO1lBQ25DLElBQUlDLFNBQVNGLFNBQVM7Z0JBQ3BCLE9BQU9BLE9BQU8sQ0FBQ0UsTUFBTTtZQUN2QjtRQUNGO1FBRUEsb0NBQW9DO1FBQ3BDLE1BQU1DLGVBQWUsTUFBTWYsbUZBQThCQSxDQUFDVztRQUUxRCxvQkFBb0I7UUFDcEIsTUFBTSxFQUFFSyxNQUFNQyxPQUFPLEVBQUViLE9BQU9jLFdBQVcsRUFBRSxHQUFHLE1BQU1ILGFBQ2pESSxJQUFJLENBQUMsaUJBQ0xDLE1BQU0sQ0FBQztZQUNOLEdBQUdSLE9BQU87WUFDVlMsWUFBWSxJQUFJQyxPQUFPQyxXQUFXO1FBQ3BDLEdBQ0NDLEVBQUUsQ0FBQyxNQUFNdEIsWUFBWXVCLEVBQUUsRUFDdkJDLE1BQU0sR0FDTkMsTUFBTTtRQUVULElBQUlULGFBQWE7WUFDZlosUUFBUUYsS0FBSyxDQUFDLDJCQUEyQmM7WUFDekMsT0FBT3JCLHFEQUFZQSxDQUFDTSxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO2dCQUE0QkcsU0FBU1c7WUFBWSxHQUMxRDtnQkFBRWIsUUFBUTtZQUFJO1FBRWxCO1FBRUEsT0FBT1IscURBQVlBLENBQUNNLElBQUksQ0FBQ2M7SUFDM0IsRUFBRSxPQUFPYixPQUFPO1FBQ2RFLFFBQVFGLEtBQUssQ0FBQywyQkFBMkJBO1FBQ3pDLE9BQU9QLHFEQUFZQSxDQUFDTSxJQUFJLENBQ3RCO1lBQUVDLE9BQU87WUFBZ0NHLFNBQVNILE1BQU1JLE9BQU87UUFBQyxHQUNoRTtZQUFFSCxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyb3Vwc2hhcmUtcHJvamVjdC8uL3NyYy9hcHAvYXBpL2F1dGgvcHJvZmlsZS9yb3V0ZS5qcz9hMGRjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHsgY3VycmVudFVzZXIgfSBmcm9tICdAY2xlcmsvbmV4dGpzL3NlcnZlcic7XHJcbmltcG9ydCB7IGdldE9yQ3JlYXRlVXNlclByb2ZpbGUgfSBmcm9tICcuLi8uLi8uLi8uLi9saWIvYXV0aC1zZXJ2aWNlJztcclxuaW1wb3J0IHsgZ2V0QXV0aGVudGljYXRlZFN1cGFiYXNlQ2xpZW50IH0gZnJvbSAnLi4vLi4vLi4vLi4vbGliL2NsZXJrLXN1cGFiYXNlJztcclxuXHJcbi8qKlxyXG4gKiBHRVQgL2FwaS9hdXRoL3Byb2ZpbGVcclxuICogUG9iaWVyYSBwcm9maWwgb2JlY25pZSB6YWxvZ293YW5lZ28gdcW8eXRrb3duaWthLCBsdWIgdHdvcnp5IGdvIGplxZtsaSBuaWUgaXN0bmllamVcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoKSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIFXFvHlqIGZ1bmtjamkgeiBhdXRoLXNlcnZpY2VcclxuICAgIGNvbnN0IHVzZXJQcm9maWxlID0gYXdhaXQgZ2V0T3JDcmVhdGVVc2VyUHJvZmlsZSgpO1xyXG4gICAgXHJcbiAgICBpZiAoIXVzZXJQcm9maWxlKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24odXNlclByb2ZpbGUpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBwcm9maWxlIEFQSTonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgZXJyb3I6ICdBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkJywgZGV0YWlsczogZXJyb3IubWVzc2FnZSB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogUEFUQ0ggL2FwaS9hdXRoL3Byb2ZpbGVcclxuICogQWt0dWFsaXp1amUgcHJvZmlsIHphbG9nb3dhbmVnbyB1xbx5dGtvd25pa2FcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQQVRDSChyZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBjdXJyZW50VXNlcigpO1xyXG4gICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBQb2JpZXJ6IHByb2ZpbCB1xbx5dGtvd25pa2FcclxuICAgIGNvbnN0IHVzZXJQcm9maWxlID0gYXdhaXQgZ2V0T3JDcmVhdGVVc2VyUHJvZmlsZSgpO1xyXG4gICAgXHJcbiAgICBpZiAoIXVzZXJQcm9maWxlKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnUHJvZmlsZSBub3QgZm91bmQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwNCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFBvYmllcnogZGFuZSB6IMW8xIVkYW5pYVxyXG4gICAgY29uc3QgdXBkYXRlcyA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xyXG4gICAgXHJcbiAgICAvLyBaYWJsb2t1aiBtb2R5ZmlrYWNqxJkgcMOzbCwga3TDs3J5Y2ggdcW8eXRrb3duaWsgbmllIHBvd2luaWVuIG3Ds2Mgem1pZW5pxIdcclxuICAgIGNvbnN0IGZvcmJpZGRlbkZpZWxkcyA9IFsnaWQnLCAnZXh0ZXJuYWxfYXV0aF9pZCcsICdlbWFpbCcsICd2ZXJpZmljYXRpb25fbGV2ZWwnLCAncmF0aW5nX2F2ZycsICdyYXRpbmdfY291bnQnLCAnY3JlYXRlZF9hdCddO1xyXG4gICAgXHJcbiAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIGZvcmJpZGRlbkZpZWxkcykge1xyXG4gICAgICBpZiAoZmllbGQgaW4gdXBkYXRlcykge1xyXG4gICAgICAgIGRlbGV0ZSB1cGRhdGVzW2ZpZWxkXTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBHZXQgYXV0aGVudGljYXRlZCBTdXBhYmFzZSBjbGllbnRcclxuICAgIGNvbnN0IHN1cGFiYXNlQXV0aCA9IGF3YWl0IGdldEF1dGhlbnRpY2F0ZWRTdXBhYmFzZUNsaWVudCh1c2VyKTtcclxuICAgIFxyXG4gICAgLy8gQWt0dWFsaXp1aiBwcm9maWxcclxuICAgIGNvbnN0IHsgZGF0YTogdXBkYXRlZCwgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUF1dGhcclxuICAgICAgLmZyb20oJ3VzZXJfcHJvZmlsZXMnKVxyXG4gICAgICAudXBkYXRlKHtcclxuICAgICAgICAuLi51cGRhdGVzLFxyXG4gICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICB9KVxyXG4gICAgICAuZXEoJ2lkJywgdXNlclByb2ZpbGUuaWQpXHJcbiAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcbiAgICBcclxuICAgIGlmICh1cGRhdGVFcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBwcm9maWxlOicsIHVwZGF0ZUVycm9yKTtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gdXBkYXRlIHByb2ZpbGUnLCBkZXRhaWxzOiB1cGRhdGVFcnJvciB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24odXBkYXRlZCk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHByb2ZpbGU6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiAnQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZCcsIGRldGFpbHM6IGVycm9yLm1lc3NhZ2UgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJjdXJyZW50VXNlciIsImdldE9yQ3JlYXRlVXNlclByb2ZpbGUiLCJnZXRBdXRoZW50aWNhdGVkU3VwYWJhc2VDbGllbnQiLCJHRVQiLCJ1c2VyUHJvZmlsZSIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsImNvbnNvbGUiLCJkZXRhaWxzIiwibWVzc2FnZSIsIlBBVENIIiwicmVxdWVzdCIsInVzZXIiLCJ1cGRhdGVzIiwiZm9yYmlkZGVuRmllbGRzIiwiZmllbGQiLCJzdXBhYmFzZUF1dGgiLCJkYXRhIiwidXBkYXRlZCIsInVwZGF0ZUVycm9yIiwiZnJvbSIsInVwZGF0ZSIsInVwZGF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJlcSIsImlkIiwic2VsZWN0Iiwic2luZ2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/auth/profile/route.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth-service.js":
/*!*********************************!*\
  !*** ./src/lib/auth-service.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCurrentUserProfile: () => (/* binding */ getCurrentUserProfile),\n/* harmony export */   getOrCreateUserProfile: () => (/* binding */ getOrCreateUserProfile),\n/* harmony export */   hasSubscriptionOfferAccess: () => (/* binding */ hasSubscriptionOfferAccess),\n/* harmony export */   isGroupAdmin: () => (/* binding */ isGroupAdmin),\n/* harmony export */   isGroupOwner: () => (/* binding */ isGroupOwner),\n/* harmony export */   isPurchaseOwner: () => (/* binding */ isPurchaseOwner)\n/* harmony export */ });\n/* harmony import */ var _clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @clerk/nextjs/server */ \"(rsc)/./node_modules/@clerk/nextjs/dist/esm/app-router/server/currentUser.js\");\n/* harmony import */ var _supabase_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./supabase-client */ \"(rsc)/./src/lib/supabase-client.js\");\n/* harmony import */ var _supabase_admin_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./supabase-admin-client */ \"(rsc)/./src/lib/supabase-admin-client.js\");\n/* harmony import */ var _clerk_supabase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./clerk-supabase */ \"(rsc)/./src/lib/clerk-supabase.js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\n\n\n\n\n// Bezpośrednie użycie klienta na potrzeby debugowania\nconst debugDirectClient = ()=>{\n    const supabaseUrl = \"https://twiarwghktzljergqfsm.supabase.co\";\n    const supabaseServiceKey = process.env.SUPABASE_SERVICE_KEY;\n    if (!supabaseUrl || !supabaseServiceKey) {\n        console.error(\"Brakuje zmiennych środowiskowych dla Supabase\");\n        return null;\n    }\n    console.log(\"Tworzenie bezpośredniego klienta z kluczem serwisowym\");\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_3__.createClient)(supabaseUrl, supabaseServiceKey);\n};\n/**\r\n * Pobiera aktualny profil użytkownika z bazy danych\r\n */ async function getCurrentUserProfile() {\n    const user = await (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_4__.currentUser)();\n    if (!user) return null;\n    try {\n        const supabaseAuth = await (0,_clerk_supabase__WEBPACK_IMPORTED_MODULE_2__.getAuthenticatedSupabaseClient)(user);\n        const { data, error } = await supabaseAuth.from(\"user_profiles\").select(\"*\").eq(\"external_auth_id\", user.id).single();\n        if (error && error.code !== \"PGRST116\") {\n            console.error(\"Error fetching user profile:\", error);\n        }\n        return data;\n    } catch (error) {\n        console.error(\"Exception in getCurrentUserProfile:\", error);\n        return null;\n    }\n}\n/**\r\n * Pobiera profil użytkownika Clerk i tworzy go jeśli nie istnieje\r\n */ async function getOrCreateUserProfile() {\n    const user = await (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_4__.currentUser)();\n    if (!user) return null;\n    try {\n        // Próba pobrania istniejącego profilu\n        const userProfile = await getCurrentUserProfile();\n        // Jeśli profil istnieje, zwróć go\n        if (userProfile) {\n            return userProfile;\n        }\n        console.log(\"Tworzenie nowego profilu dla użytkownika:\", user.id);\n        // W przeciwnym razie utwórz nowy profil\n        const newProfile = {\n            external_auth_id: user.id,\n            display_name: user.firstName ? `${user.firstName} ${user.lastName || \"\"}`.trim() : user.username || \"Nowy użytkownik\",\n            email: user.emailAddresses && user.emailAddresses[0]?.emailAddress || \"\",\n            phone_number: user.phoneNumbers && user.phoneNumbers[0]?.phoneNumber || null,\n            profile_type: \"both\",\n            verification_level: \"basic\",\n            bio: \"\",\n            avatar_url: user.imageUrl || null,\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n        };\n        // ROZWIĄZANIE TYMCZASOWE: Użyj bezpośredniego klienta z kluczem serwisowym\n        const directClient = debugDirectClient();\n        if (directClient) {\n            try {\n                console.log(\"Pr\\xf3ba użycia bezpośredniego klienta do utworzenia profilu\");\n                const { data: createdProfile, error: createError } = await directClient.from(\"user_profiles\").insert([\n                    newProfile\n                ]).select().single();\n                if (createError) {\n                    console.error(\"Error creating user profile with direct client:\", createError);\n                } else if (createdProfile) {\n                    console.log(\"Profil użytkownika utworzony pomyślnie z użyciem bezpośredniego klienta\");\n                    return createdProfile;\n                }\n            } catch (directError) {\n                console.error(\"Exception when using direct client:\", directError);\n            }\n        }\n        // Standardowa metoda, jako fallback\n        try {\n            const { data: createdProfile, error: createError } = await _supabase_admin_client__WEBPACK_IMPORTED_MODULE_1__[\"default\"].from(\"user_profiles\").insert([\n                newProfile\n            ]).select().single();\n            if (createError) {\n                console.error(\"Error creating user profile with supabaseAdmin:\", createError);\n                // OBEJŚCIE: Jeśli mamy problemy z uprawnieniami, zwróć tymczasowy profil\n                if (createError.code === \"42501\") {\n                    console.warn(\"Returning temporary profile due to permissions issue\");\n                    return {\n                        ...newProfile,\n                        id: \"temp_\" + Math.random().toString(36).substr(2, 9),\n                        _isTemporaryProfile: true\n                    };\n                }\n                return null;\n            }\n            return createdProfile;\n        } catch (createError) {\n            console.error(\"Exception when creating user profile with supabaseAdmin:\", createError);\n            return null;\n        }\n    } catch (error) {\n        console.error(\"Error in getOrCreateUserProfile:\", error);\n        return null;\n    }\n}\n/**\r\n * Sprawdza, czy użytkownik jest właścicielem grupy\r\n */ async function isGroupOwner(groupId) {\n    const user = await (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_4__.currentUser)();\n    if (!user) return false;\n    const supabaseAuth = await (0,_clerk_supabase__WEBPACK_IMPORTED_MODULE_2__.getAuthenticatedSupabaseClient)(user);\n    const { data } = await supabaseAuth.from(\"groups\").select(\"owner_id\").eq(\"id\", groupId).single();\n    const profile = await getCurrentUserProfile();\n    if (!profile) return false;\n    return data?.owner_id === profile.id;\n}\n/**\r\n * Sprawdza, czy użytkownik jest administratorem grupy\r\n */ async function isGroupAdmin(groupId) {\n    // Sprawdzenie, czy jest właścicielem\n    if (await isGroupOwner(groupId)) return true;\n    const user = await (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_4__.currentUser)();\n    if (!user) return false;\n    const supabaseAuth = await (0,_clerk_supabase__WEBPACK_IMPORTED_MODULE_2__.getAuthenticatedSupabaseClient)(user);\n    const profile = await getCurrentUserProfile();\n    if (!profile) return false;\n    // Sprawdzenie, czy jest adminem\n    const { data } = await supabaseAuth.from(\"group_members\").select(\"role\").eq(\"group_id\", groupId).eq(\"user_id\", profile.id).eq(\"status\", \"active\").single();\n    return data?.role === \"admin\";\n}\n/**\r\n * Sprawdza, czy użytkownik ma uprawnienia do oferty subskrypcji\r\n */ async function hasSubscriptionOfferAccess(offerId) {\n    const user = await (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_4__.currentUser)();\n    if (!user) return false;\n    const supabaseAuth = await (0,_clerk_supabase__WEBPACK_IMPORTED_MODULE_2__.getAuthenticatedSupabaseClient)(user);\n    const { data: offer } = await supabaseAuth.from(\"group_subs\").select(\"group_id\").eq(\"id\", offerId).single();\n    if (!offer) return false;\n    return await isGroupAdmin(offer.group_id);\n}\n/**\r\n * Sprawdza, czy użytkownik jest właścicielem zakupu\r\n */ async function isPurchaseOwner(purchaseId) {\n    const profile = await getCurrentUserProfile();\n    if (!profile) return false;\n    const user = await (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_4__.currentUser)();\n    if (!user) return false;\n    const supabaseAuth = await (0,_clerk_supabase__WEBPACK_IMPORTED_MODULE_2__.getAuthenticatedSupabaseClient)(user);\n    const { data } = await supabaseAuth.from(\"purchase_records\").select(\"user_id\").eq(\"id\", purchaseId).single();\n    return data?.user_id === profile.id;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFNaEIsaUVBQVdBO0lBQzlCLElBQUksQ0FBQ2dCLE1BQU0sT0FBTztJQUVsQixNQUFNQyxlQUFlLE1BQU1kLCtFQUE4QkEsQ0FBQ2E7SUFFMUQsTUFBTSxFQUFFRSxJQUFJLEVBQUUsR0FBRyxNQUFNRCxhQUNwQkUsSUFBSSxDQUFDLG9CQUNMQyxNQUFNLENBQUMsV0FDUEMsRUFBRSxDQUFDLE1BQU1rRCxZQUNUaEQsTUFBTTtJQUVULE9BQU9MLE1BQU1zRCxZQUFZVixRQUFReEMsRUFBRTtBQUNyQyIsInNvdXJjZXMiOlsid2VicGFjazovL2dyb3Vwc2hhcmUtcHJvamVjdC8uL3NyYy9saWIvYXV0aC1zZXJ2aWNlLmpzP2U4ZWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3VycmVudFVzZXIgfSBmcm9tICdAY2xlcmsvbmV4dGpzL3NlcnZlcic7XHJcbmltcG9ydCBzdXBhYmFzZSBmcm9tICcuL3N1cGFiYXNlLWNsaWVudCc7XHJcbmltcG9ydCBzdXBhYmFzZUFkbWluIGZyb20gJy4vc3VwYWJhc2UtYWRtaW4tY2xpZW50JztcclxuaW1wb3J0IHsgZ2V0QXV0aGVudGljYXRlZFN1cGFiYXNlQ2xpZW50IH0gZnJvbSAnLi9jbGVyay1zdXBhYmFzZSc7XHJcbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XHJcblxyXG4vLyBCZXpwb8WbcmVkbmllIHXFvHljaWUga2xpZW50YSBuYSBwb3RyemVieSBkZWJ1Z293YW5pYVxyXG5jb25zdCBkZWJ1Z0RpcmVjdENsaWVudCA9ICgpID0+IHtcclxuICBjb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDtcclxuICBjb25zdCBzdXBhYmFzZVNlcnZpY2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX0tFWTtcclxuICBcclxuICBpZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZVNlcnZpY2VLZXkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0JyYWt1amUgem1pZW5ueWNoIMWbcm9kb3dpc2tvd3ljaCBkbGEgU3VwYWJhc2UnKTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuICBcclxuICBjb25zb2xlLmxvZyhcIlR3b3J6ZW5pZSBiZXpwb8WbcmVkbmllZ28ga2xpZW50YSB6IGtsdWN6ZW0gc2Vyd2lzb3d5bVwiKTtcclxuICByZXR1cm4gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZVNlcnZpY2VLZXkpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFBvYmllcmEgYWt0dWFsbnkgcHJvZmlsIHXFvHl0a293bmlrYSB6IGJhenkgZGFueWNoXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXJQcm9maWxlKCkge1xyXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBjdXJyZW50VXNlcigpO1xyXG4gIFxyXG4gIGlmICghdXNlcikgcmV0dXJuIG51bGw7XHJcbiAgXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN1cGFiYXNlQXV0aCA9IGF3YWl0IGdldEF1dGhlbnRpY2F0ZWRTdXBhYmFzZUNsaWVudCh1c2VyKTtcclxuICAgIFxyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBdXRoXHJcbiAgICAgIC5mcm9tKCd1c2VyX3Byb2ZpbGVzJylcclxuICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgIC5lcSgnZXh0ZXJuYWxfYXV0aF9pZCcsIHVzZXIuaWQpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuICAgIFxyXG4gICAgaWYgKGVycm9yICYmIGVycm9yLmNvZGUgIT09ICdQR1JTVDExNicpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlciBwcm9maWxlOicsIGVycm9yKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0V4Y2VwdGlvbiBpbiBnZXRDdXJyZW50VXNlclByb2ZpbGU6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogUG9iaWVyYSBwcm9maWwgdcW8eXRrb3duaWthIENsZXJrIGkgdHdvcnp5IGdvIGplxZtsaSBuaWUgaXN0bmllamVcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPckNyZWF0ZVVzZXJQcm9maWxlKCkge1xyXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBjdXJyZW50VXNlcigpO1xyXG4gIFxyXG4gIGlmICghdXNlcikgcmV0dXJuIG51bGw7XHJcbiAgXHJcbiAgdHJ5IHtcclxuICAgIC8vIFByw7NiYSBwb2JyYW5pYSBpc3RuaWVqxIVjZWdvIHByb2ZpbHVcclxuICAgIGNvbnN0IHVzZXJQcm9maWxlID0gYXdhaXQgZ2V0Q3VycmVudFVzZXJQcm9maWxlKCk7XHJcbiAgICBcclxuICAgIC8vIEplxZtsaSBwcm9maWwgaXN0bmllamUsIHp3csOzxIcgZ29cclxuICAgIGlmICh1c2VyUHJvZmlsZSkge1xyXG4gICAgICByZXR1cm4gdXNlclByb2ZpbGU7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKFwiVHdvcnplbmllIG5vd2VnbyBwcm9maWx1IGRsYSB1xbx5dGtvd25pa2E6XCIsIHVzZXIuaWQpO1xyXG4gICAgXHJcbiAgICAvLyBXIHByemVjaXdueW0gcmF6aWUgdXR3w7NyeiBub3d5IHByb2ZpbFxyXG4gICAgY29uc3QgbmV3UHJvZmlsZSA9IHtcclxuICAgICAgZXh0ZXJuYWxfYXV0aF9pZDogdXNlci5pZCxcclxuICAgICAgZGlzcGxheV9uYW1lOiB1c2VyLmZpcnN0TmFtZSBcclxuICAgICAgICA/IGAke3VzZXIuZmlyc3ROYW1lfSAke3VzZXIubGFzdE5hbWUgfHwgJyd9YC50cmltKCkgXHJcbiAgICAgICAgOiAodXNlci51c2VybmFtZSB8fCAnTm93eSB1xbx5dGtvd25paycpLFxyXG4gICAgICBlbWFpbDogdXNlci5lbWFpbEFkZHJlc3NlcyAmJiB1c2VyLmVtYWlsQWRkcmVzc2VzWzBdPy5lbWFpbEFkZHJlc3MgfHwgJycsXHJcbiAgICAgIHBob25lX251bWJlcjogdXNlci5waG9uZU51bWJlcnMgJiYgdXNlci5waG9uZU51bWJlcnNbMF0/LnBob25lTnVtYmVyIHx8IG51bGwsXHJcbiAgICAgIHByb2ZpbGVfdHlwZTogJ2JvdGgnLFxyXG4gICAgICB2ZXJpZmljYXRpb25fbGV2ZWw6ICdiYXNpYycsXHJcbiAgICAgIGJpbzogJycsXHJcbiAgICAgIGF2YXRhcl91cmw6IHVzZXIuaW1hZ2VVcmwgfHwgbnVsbCxcclxuICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgIH07XHJcbiAgICBcclxuICAgIC8vIFJPWldJxIRaQU5JRSBUWU1DWkFTT1dFOiBVxbx5aiBiZXpwb8WbcmVkbmllZ28ga2xpZW50YSB6IGtsdWN6ZW0gc2Vyd2lzb3d5bVxyXG4gICAgY29uc3QgZGlyZWN0Q2xpZW50ID0gZGVidWdEaXJlY3RDbGllbnQoKTtcclxuICAgIFxyXG4gICAgaWYgKGRpcmVjdENsaWVudCkge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiUHLDs2JhIHXFvHljaWEgYmV6cG/Fm3JlZG5pZWdvIGtsaWVudGEgZG8gdXR3b3J6ZW5pYSBwcm9maWx1XCIpO1xyXG4gICAgICAgIGNvbnN0IHsgZGF0YTogY3JlYXRlZFByb2ZpbGUsIGVycm9yOiBjcmVhdGVFcnJvciB9ID0gYXdhaXQgZGlyZWN0Q2xpZW50XHJcbiAgICAgICAgICAuZnJvbSgndXNlcl9wcm9maWxlcycpXHJcbiAgICAgICAgICAuaW5zZXJ0KFtuZXdQcm9maWxlXSlcclxuICAgICAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAgICAgLnNpbmdsZSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChjcmVhdGVFcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgdXNlciBwcm9maWxlIHdpdGggZGlyZWN0IGNsaWVudDonLCBjcmVhdGVFcnJvcik7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjcmVhdGVkUHJvZmlsZSkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coXCJQcm9maWwgdcW8eXRrb3duaWthIHV0d29yem9ueSBwb215xZtsbmllIHogdcW8eWNpZW0gYmV6cG/Fm3JlZG5pZWdvIGtsaWVudGFcIik7XHJcbiAgICAgICAgICByZXR1cm4gY3JlYXRlZFByb2ZpbGU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChkaXJlY3RFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0V4Y2VwdGlvbiB3aGVuIHVzaW5nIGRpcmVjdCBjbGllbnQ6JywgZGlyZWN0RXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFN0YW5kYXJkb3dhIG1ldG9kYSwgamFrbyBmYWxsYmFja1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBkYXRhOiBjcmVhdGVkUHJvZmlsZSwgZXJyb3I6IGNyZWF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgICAgLmZyb20oJ3VzZXJfcHJvZmlsZXMnKVxyXG4gICAgICAgIC5pbnNlcnQoW25ld1Byb2ZpbGVdKVxyXG4gICAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAgIC5zaW5nbGUoKTtcclxuICAgICAgXHJcbiAgICAgIGlmIChjcmVhdGVFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHVzZXIgcHJvZmlsZSB3aXRoIHN1cGFiYXNlQWRtaW46JywgY3JlYXRlRXJyb3IpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIE9CRUrFmkNJRTogSmXFm2xpIG1hbXkgcHJvYmxlbXkgeiB1cHJhd25pZW5pYW1pLCB6d3LDs8SHIHR5bWN6YXNvd3kgcHJvZmlsXHJcbiAgICAgICAgaWYgKGNyZWF0ZUVycm9yLmNvZGUgPT09ICc0MjUwMScpIHtcclxuICAgICAgICAgIGNvbnNvbGUud2FybignUmV0dXJuaW5nIHRlbXBvcmFyeSBwcm9maWxlIGR1ZSB0byBwZXJtaXNzaW9ucyBpc3N1ZScpO1xyXG4gICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgLi4ubmV3UHJvZmlsZSxcclxuICAgICAgICAgICAgaWQ6ICd0ZW1wXycgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSksXHJcbiAgICAgICAgICAgIF9pc1RlbXBvcmFyeVByb2ZpbGU6IHRydWVcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gY3JlYXRlZFByb2ZpbGU7XHJcbiAgICB9IGNhdGNoIChjcmVhdGVFcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFeGNlcHRpb24gd2hlbiBjcmVhdGluZyB1c2VyIHByb2ZpbGUgd2l0aCBzdXBhYmFzZUFkbWluOicsIGNyZWF0ZUVycm9yKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdldE9yQ3JlYXRlVXNlclByb2ZpbGU6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogU3ByYXdkemEsIGN6eSB1xbx5dGtvd25payBqZXN0IHfFgmHFm2NpY2llbGVtIGdydXB5XHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaXNHcm91cE93bmVyKGdyb3VwSWQpIHtcclxuICBjb25zdCB1c2VyID0gYXdhaXQgY3VycmVudFVzZXIoKTtcclxuICBpZiAoIXVzZXIpIHJldHVybiBmYWxzZTtcclxuICBcclxuICBjb25zdCBzdXBhYmFzZUF1dGggPSBhd2FpdCBnZXRBdXRoZW50aWNhdGVkU3VwYWJhc2VDbGllbnQodXNlcik7XHJcbiAgXHJcbiAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBzdXBhYmFzZUF1dGhcclxuICAgIC5mcm9tKCdncm91cHMnKVxyXG4gICAgLnNlbGVjdCgnb3duZXJfaWQnKVxyXG4gICAgLmVxKCdpZCcsIGdyb3VwSWQpXHJcbiAgICAuc2luZ2xlKCk7XHJcbiAgXHJcbiAgY29uc3QgcHJvZmlsZSA9IGF3YWl0IGdldEN1cnJlbnRVc2VyUHJvZmlsZSgpO1xyXG4gIGlmICghcHJvZmlsZSkgcmV0dXJuIGZhbHNlO1xyXG4gIFxyXG4gIHJldHVybiBkYXRhPy5vd25lcl9pZCA9PT0gcHJvZmlsZS5pZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNwcmF3ZHphLCBjenkgdcW8eXRrb3duaWsgamVzdCBhZG1pbmlzdHJhdG9yZW0gZ3J1cHlcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpc0dyb3VwQWRtaW4oZ3JvdXBJZCkge1xyXG4gIC8vIFNwcmF3ZHplbmllLCBjenkgamVzdCB3xYJhxZtjaWNpZWxlbVxyXG4gIGlmIChhd2FpdCBpc0dyb3VwT3duZXIoZ3JvdXBJZCkpIHJldHVybiB0cnVlO1xyXG4gIFxyXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBjdXJyZW50VXNlcigpO1xyXG4gIGlmICghdXNlcikgcmV0dXJuIGZhbHNlO1xyXG4gIFxyXG4gIGNvbnN0IHN1cGFiYXNlQXV0aCA9IGF3YWl0IGdldEF1dGhlbnRpY2F0ZWRTdXBhYmFzZUNsaWVudCh1c2VyKTtcclxuICBjb25zdCBwcm9maWxlID0gYXdhaXQgZ2V0Q3VycmVudFVzZXJQcm9maWxlKCk7XHJcbiAgaWYgKCFwcm9maWxlKSByZXR1cm4gZmFsc2U7XHJcbiAgXHJcbiAgLy8gU3ByYXdkemVuaWUsIGN6eSBqZXN0IGFkbWluZW1cclxuICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IHN1cGFiYXNlQXV0aFxyXG4gICAgLmZyb20oJ2dyb3VwX21lbWJlcnMnKVxyXG4gICAgLnNlbGVjdCgncm9sZScpXHJcbiAgICAuZXEoJ2dyb3VwX2lkJywgZ3JvdXBJZClcclxuICAgIC5lcSgndXNlcl9pZCcsIHByb2ZpbGUuaWQpXHJcbiAgICAuZXEoJ3N0YXR1cycsICdhY3RpdmUnKVxyXG4gICAgLnNpbmdsZSgpO1xyXG4gIFxyXG4gIHJldHVybiBkYXRhPy5yb2xlID09PSAnYWRtaW4nO1xyXG59XHJcblxyXG4vKipcclxuICogU3ByYXdkemEsIGN6eSB1xbx5dGtvd25payBtYSB1cHJhd25pZW5pYSBkbyBvZmVydHkgc3Vic2tyeXBjamlcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYXNTdWJzY3JpcHRpb25PZmZlckFjY2VzcyhvZmZlcklkKSB7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IGN1cnJlbnRVc2VyKCk7XHJcbiAgaWYgKCF1c2VyKSByZXR1cm4gZmFsc2U7XHJcbiAgXHJcbiAgY29uc3Qgc3VwYWJhc2VBdXRoID0gYXdhaXQgZ2V0QXV0aGVudGljYXRlZFN1cGFiYXNlQ2xpZW50KHVzZXIpO1xyXG4gIFxyXG4gIGNvbnN0IHsgZGF0YTogb2ZmZXIgfSA9IGF3YWl0IHN1cGFiYXNlQXV0aFxyXG4gICAgLmZyb20oJ2dyb3VwX3N1YnMnKVxyXG4gICAgLnNlbGVjdCgnZ3JvdXBfaWQnKVxyXG4gICAgLmVxKCdpZCcsIG9mZmVySWQpXHJcbiAgICAuc2luZ2xlKCk7XHJcbiAgXHJcbiAgaWYgKCFvZmZlcikgcmV0dXJuIGZhbHNlO1xyXG4gIFxyXG4gIHJldHVybiBhd2FpdCBpc0dyb3VwQWRtaW4ob2ZmZXIuZ3JvdXBfaWQpO1xyXG59XHJcblxyXG4vKipcclxuICogU3ByYXdkemEsIGN6eSB1xbx5dGtvd25payBqZXN0IHfFgmHFm2NpY2llbGVtIHpha3VwdVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGlzUHVyY2hhc2VPd25lcihwdXJjaGFzZUlkKSB7XHJcbiAgY29uc3QgcHJvZmlsZSA9IGF3YWl0IGdldEN1cnJlbnRVc2VyUHJvZmlsZSgpO1xyXG4gIGlmICghcHJvZmlsZSkgcmV0dXJuIGZhbHNlO1xyXG4gIFxyXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBjdXJyZW50VXNlcigpO1xyXG4gIGlmICghdXNlcikgcmV0dXJuIGZhbHNlO1xyXG4gIFxyXG4gIGNvbnN0IHN1cGFiYXNlQXV0aCA9IGF3YWl0IGdldEF1dGhlbnRpY2F0ZWRTdXBhYmFzZUNsaWVudCh1c2VyKTtcclxuICBcclxuICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IHN1cGFiYXNlQXV0aFxyXG4gICAgLmZyb20oJ3B1cmNoYXNlX3JlY29yZHMnKVxyXG4gICAgLnNlbGVjdCgndXNlcl9pZCcpXHJcbiAgICAuZXEoJ2lkJywgcHVyY2hhc2VJZClcclxuICAgIC5zaW5nbGUoKTtcclxuICBcclxuICByZXR1cm4gZGF0YT8udXNlcl9pZCA9PT0gcHJvZmlsZS5pZDtcclxufSJdLCJuYW1lcyI6WyJjdXJyZW50VXNlciIsInN1cGFiYXNlIiwic3VwYWJhc2VBZG1pbiIsImdldEF1dGhlbnRpY2F0ZWRTdXBhYmFzZUNsaWVudCIsImNyZWF0ZUNsaWVudCIsImRlYnVnRGlyZWN0Q2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VTZXJ2aWNlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9LRVkiLCJjb25zb2xlIiwiZXJyb3IiLCJsb2ciLCJnZXRDdXJyZW50VXNlclByb2ZpbGUiLCJ1c2VyIiwic3VwYWJhc2VBdXRoIiwiZGF0YSIsImZyb20iLCJzZWxlY3QiLCJlcSIsImlkIiwic2luZ2xlIiwiY29kZSIsImdldE9yQ3JlYXRlVXNlclByb2ZpbGUiLCJ1c2VyUHJvZmlsZSIsIm5ld1Byb2ZpbGUiLCJleHRlcm5hbF9hdXRoX2lkIiwiZGlzcGxheV9uYW1lIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJ0cmltIiwidXNlcm5hbWUiLCJlbWFpbCIsImVtYWlsQWRkcmVzc2VzIiwiZW1haWxBZGRyZXNzIiwicGhvbmVfbnVtYmVyIiwicGhvbmVOdW1iZXJzIiwicGhvbmVOdW1iZXIiLCJwcm9maWxlX3R5cGUiLCJ2ZXJpZmljYXRpb25fbGV2ZWwiLCJiaW8iLCJhdmF0YXJfdXJsIiwiaW1hZ2VVcmwiLCJjcmVhdGVkX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwidXBkYXRlZF9hdCIsImRpcmVjdENsaWVudCIsImNyZWF0ZWRQcm9maWxlIiwiY3JlYXRlRXJyb3IiLCJpbnNlcnQiLCJkaXJlY3RFcnJvciIsIndhcm4iLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHIiLCJfaXNUZW1wb3JhcnlQcm9maWxlIiwiaXNHcm91cE93bmVyIiwiZ3JvdXBJZCIsInByb2ZpbGUiLCJvd25lcl9pZCIsImlzR3JvdXBBZG1pbiIsInJvbGUiLCJoYXNTdWJzY3JpcHRpb25PZmZlckFjY2VzcyIsIm9mZmVySWQiLCJvZmZlciIsImdyb3VwX2lkIiwiaXNQdXJjaGFzZU93bmVyIiwicHVyY2hhc2VJZCIsInVzZXJfaWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth-service.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/clerk-supabase.js":
/*!***********************************!*\
  !*** ./src/lib/clerk-supabase.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSupabaseClientWithAuth: () => (/* binding */ createSupabaseClientWithAuth),\n/* harmony export */   getAuthenticatedSupabaseClient: () => (/* binding */ getAuthenticatedSupabaseClient)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://twiarwghktzljergqfsm.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3aWFyd2doa3R6bGplcmdxZnNtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQwMTcxMjQsImV4cCI6MjA1OTU5MzEyNH0.TtgGfR9sAFu3ipD8bpLsFhZl0ECxYMBodeAEOsx9u6Y\";\n/**\r\n * Creates a Supabase client with authorization from Clerk token\r\n * @param {string} clerkToken - JWT token from Clerk\r\n * @returns Supabase client with auth headers\r\n */ function createSupabaseClientWithAuth(clerkToken) {\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey, {\n        global: {\n            headers: {\n                Authorization: `Bearer ${clerkToken}`\n            }\n        }\n    });\n}\n/**\r\n * Server-side function to get an authenticated Supabase client \r\n * using the current user's Clerk token\r\n * @param {Object} user - Current Clerk user\r\n * @returns Supabase client with auth headers\r\n */ async function getAuthenticatedSupabaseClient(user) {\n    if (!user) return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n    try {\n        // First try to get the token with the template parameter (preferred method)\n        if (typeof user.getToken === \"function\") {\n            try {\n                const token = await user.getToken({\n                    template: \"supabase\"\n                });\n                return createSupabaseClientWithAuth(token);\n            } catch (err) {\n                console.warn(\"Could not get token with template parameter:\", err);\n            }\n        }\n        // Fallback: try to get the token without any parameters\n        if (typeof user.getToken === \"function\") {\n            try {\n                const token = await user.getToken();\n                return createSupabaseClientWithAuth(token);\n            } catch (err) {\n                console.warn(\"Could not get token without parameters:\", err);\n            }\n        }\n        // Fallback: try to access JWT directly (if available on user object)\n        if (user.jwt) {\n            return createSupabaseClientWithAuth(user.jwt);\n        }\n        // If all else fails, log a warning and return unauthenticated client\n        console.warn(\"Could not get authentication token from user object, returning unauthenticated client\");\n        return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n    } catch (error) {\n        console.error(\"Error in getAuthenticatedSupabaseClient:\", error);\n        return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2NsZXJrLXN1cGFiYXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFxRDtBQUVyRCxNQUFNQyxjQUFjQywwQ0FBb0M7QUFDeEQsTUFBTUcsa0JBQWtCSCxrTkFBeUM7QUFFakU7Ozs7Q0FJQyxHQUNNLFNBQVNLLDZCQUE2QkMsVUFBVTtJQUNyRCxPQUFPUixtRUFBWUEsQ0FDakJDLGFBQ0FJLGlCQUNBO1FBQ0VJLFFBQVE7WUFDTkMsU0FBUztnQkFDUEMsZUFBZSxDQUFDLE9BQU8sRUFBRUgsV0FBVyxDQUFDO1lBQ3ZDO1FBQ0Y7SUFDRjtBQUVKO0FBRUE7Ozs7O0NBS0MsR0FDTSxlQUFlSSwrQkFBK0JDLElBQUk7SUFDdkQsSUFBSSxDQUFDQSxNQUFNLE9BQU9iLG1FQUFZQSxDQUFDQyxhQUFhSTtJQUU1QyxJQUFJO1FBQ0YsNEVBQTRFO1FBQzVFLElBQUksT0FBT1EsS0FBS0MsUUFBUSxLQUFLLFlBQVk7WUFDdkMsSUFBSTtnQkFDRixNQUFNQyxRQUFRLE1BQU1GLEtBQUtDLFFBQVEsQ0FBQztvQkFBRUUsVUFBVTtnQkFBVztnQkFDekQsT0FBT1QsNkJBQTZCUTtZQUN0QyxFQUFFLE9BQU9FLEtBQUs7Z0JBQ1pDLFFBQVFDLElBQUksQ0FBQyxnREFBZ0RGO1lBQy9EO1FBQ0Y7UUFFQSx3REFBd0Q7UUFDeEQsSUFBSSxPQUFPSixLQUFLQyxRQUFRLEtBQUssWUFBWTtZQUN2QyxJQUFJO2dCQUNGLE1BQU1DLFFBQVEsTUFBTUYsS0FBS0MsUUFBUTtnQkFDakMsT0FBT1AsNkJBQTZCUTtZQUN0QyxFQUFFLE9BQU9FLEtBQUs7Z0JBQ1pDLFFBQVFDLElBQUksQ0FBQywyQ0FBMkNGO1lBQzFEO1FBQ0Y7UUFFQSxxRUFBcUU7UUFDckUsSUFBSUosS0FBS08sR0FBRyxFQUFFO1lBQ1osT0FBT2IsNkJBQTZCTSxLQUFLTyxHQUFHO1FBQzlDO1FBRUEscUVBQXFFO1FBQ3JFRixRQUFRQyxJQUFJLENBQUM7UUFDYixPQUFPbkIsbUVBQVlBLENBQUNDLGFBQWFJO0lBQ25DLEVBQUUsT0FBT2dCLE9BQU87UUFDZEgsUUFBUUcsS0FBSyxDQUFDLDRDQUE0Q0E7UUFDMUQsT0FBT3JCLG1FQUFZQSxDQUFDQyxhQUFhSTtJQUNuQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JvdXBzaGFyZS1wcm9qZWN0Ly4vc3JjL2xpYi9jbGVyay1zdXBhYmFzZS5qcz84YTMzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XHJcblxyXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDtcclxuY29uc3Qgc3VwYWJhc2VBbm9uS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVk7XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIFN1cGFiYXNlIGNsaWVudCB3aXRoIGF1dGhvcml6YXRpb24gZnJvbSBDbGVyayB0b2tlblxyXG4gKiBAcGFyYW0ge3N0cmluZ30gY2xlcmtUb2tlbiAtIEpXVCB0b2tlbiBmcm9tIENsZXJrXHJcbiAqIEByZXR1cm5zIFN1cGFiYXNlIGNsaWVudCB3aXRoIGF1dGggaGVhZGVyc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN1cGFiYXNlQ2xpZW50V2l0aEF1dGgoY2xlcmtUb2tlbikge1xyXG4gIHJldHVybiBjcmVhdGVDbGllbnQoXHJcbiAgICBzdXBhYmFzZVVybCxcclxuICAgIHN1cGFiYXNlQW5vbktleSxcclxuICAgIHtcclxuICAgICAgZ2xvYmFsOiB7XHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NsZXJrVG9rZW59YFxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXJ2ZXItc2lkZSBmdW5jdGlvbiB0byBnZXQgYW4gYXV0aGVudGljYXRlZCBTdXBhYmFzZSBjbGllbnQgXHJcbiAqIHVzaW5nIHRoZSBjdXJyZW50IHVzZXIncyBDbGVyayB0b2tlblxyXG4gKiBAcGFyYW0ge09iamVjdH0gdXNlciAtIEN1cnJlbnQgQ2xlcmsgdXNlclxyXG4gKiBAcmV0dXJucyBTdXBhYmFzZSBjbGllbnQgd2l0aCBhdXRoIGhlYWRlcnNcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBdXRoZW50aWNhdGVkU3VwYWJhc2VDbGllbnQodXNlcikge1xyXG4gIGlmICghdXNlcikgcmV0dXJuIGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KTtcclxuICBcclxuICB0cnkge1xyXG4gICAgLy8gRmlyc3QgdHJ5IHRvIGdldCB0aGUgdG9rZW4gd2l0aCB0aGUgdGVtcGxhdGUgcGFyYW1ldGVyIChwcmVmZXJyZWQgbWV0aG9kKVxyXG4gICAgaWYgKHR5cGVvZiB1c2VyLmdldFRva2VuID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgdG9rZW4gPSBhd2FpdCB1c2VyLmdldFRva2VuKHsgdGVtcGxhdGU6IFwic3VwYWJhc2VcIiB9KTtcclxuICAgICAgICByZXR1cm4gY3JlYXRlU3VwYWJhc2VDbGllbnRXaXRoQXV0aCh0b2tlbik7XHJcbiAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignQ291bGQgbm90IGdldCB0b2tlbiB3aXRoIHRlbXBsYXRlIHBhcmFtZXRlcjonLCBlcnIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIEZhbGxiYWNrOiB0cnkgdG8gZ2V0IHRoZSB0b2tlbiB3aXRob3V0IGFueSBwYXJhbWV0ZXJzXHJcbiAgICBpZiAodHlwZW9mIHVzZXIuZ2V0VG9rZW4gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB0b2tlbiA9IGF3YWl0IHVzZXIuZ2V0VG9rZW4oKTtcclxuICAgICAgICByZXR1cm4gY3JlYXRlU3VwYWJhc2VDbGllbnRXaXRoQXV0aCh0b2tlbik7XHJcbiAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignQ291bGQgbm90IGdldCB0b2tlbiB3aXRob3V0IHBhcmFtZXRlcnM6JywgZXJyKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBGYWxsYmFjazogdHJ5IHRvIGFjY2VzcyBKV1QgZGlyZWN0bHkgKGlmIGF2YWlsYWJsZSBvbiB1c2VyIG9iamVjdClcclxuICAgIGlmICh1c2VyLmp3dCkge1xyXG4gICAgICByZXR1cm4gY3JlYXRlU3VwYWJhc2VDbGllbnRXaXRoQXV0aCh1c2VyLmp3dCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIElmIGFsbCBlbHNlIGZhaWxzLCBsb2cgYSB3YXJuaW5nIGFuZCByZXR1cm4gdW5hdXRoZW50aWNhdGVkIGNsaWVudFxyXG4gICAgY29uc29sZS53YXJuKCdDb3VsZCBub3QgZ2V0IGF1dGhlbnRpY2F0aW9uIHRva2VuIGZyb20gdXNlciBvYmplY3QsIHJldHVybmluZyB1bmF1dGhlbnRpY2F0ZWQgY2xpZW50Jyk7XHJcbiAgICByZXR1cm4gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUFub25LZXkpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBnZXRBdXRoZW50aWNhdGVkU3VwYWJhc2VDbGllbnQ6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VBbm9uS2V5IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJjcmVhdGVTdXBhYmFzZUNsaWVudFdpdGhBdXRoIiwiY2xlcmtUb2tlbiIsImdsb2JhbCIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwiZ2V0QXV0aGVudGljYXRlZFN1cGFiYXNlQ2xpZW50IiwidXNlciIsImdldFRva2VuIiwidG9rZW4iLCJ0ZW1wbGF0ZSIsImVyciIsImNvbnNvbGUiLCJ3YXJuIiwiand0IiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/clerk-supabase.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase-admin-client.js":
/*!******************************************!*\
  !*** ./src/lib/supabase-admin-client.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://twiarwghktzljergqfsm.supabase.co\";\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_KEY;\nif (!supabaseUrl || !supabaseServiceKey) {\n    console.error(\"Missing environment variables: NEXT_PUBLIC_SUPABASE_URL or SUPABASE_SERVICE_KEY\");\n}\n// Dodaj diagnostyczne informacje\nconsole.log(\"Inicjalizacja supabaseAdmin z kluczem serwisowym\");\nconsole.log(\"URL:\", supabaseUrl);\nconsole.log(\"Key length:\", supabaseServiceKey ? supabaseServiceKey.length : 0);\nconsole.log(\"Key prefix:\", supabaseServiceKey ? supabaseServiceKey.substring(0, 5) + \"...\" : \"undefined\");\n// Klient z uprawnieniami administratora, używany TYLKO na serwerze\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    },\n    // Wyłącz RLS - spróbujmy różne podejścia\n    db: {\n        schema: \"public\"\n    },\n    global: {\n        headers: {\n            \"x-supabase-bypass-rls\": \"true\"\n        }\n    }\n});\n// Test połączenia\nasync function testConnection() {\n    try {\n        console.log(\"Pr\\xf3ba pobrania profili użytkownik\\xf3w\");\n        const { data, error, status, statusText } = await supabaseAdmin.from(\"user_profiles\").select(\"id, external_auth_id, display_name\").limit(5);\n        if (error) {\n            console.error(\"Błąd testowego połączenia do Supabase (admin):\", {\n                error,\n                status,\n                statusText,\n                errorDetails: error.details\n            });\n        } else {\n            console.log(\"Pomyślne testowe połączenie do Supabase (admin)\");\n            console.log(\"Pobrane profile:\", data);\n        }\n    } catch (e) {\n        console.error(\"Wyjątek podczas testowego połączenia:\", e);\n    }\n}\n// Uruchom test połączenia podczas inicjalizacji\ntestConnection();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (supabaseAdmin);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3N1cGFiYXNlLWFkbWluLWNsaWVudC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFxRDtBQUVyRCxNQUFNQyxjQUFjQywwQ0FBb0M7QUFDeEQsTUFBTUcscUJBQXFCSCxRQUFRQyxHQUFHLENBQUNHLG9CQUFvQjtBQUUzRCxJQUFJLENBQUNMLGVBQWUsQ0FBQ0ksb0JBQW9CO0lBQ3ZDRSxRQUFRQyxLQUFLLENBQ1g7QUFFSjtBQUVBLGlDQUFpQztBQUNqQ0QsUUFBUUUsR0FBRyxDQUFDO0FBQ1pGLFFBQVFFLEdBQUcsQ0FBQyxRQUFRUjtBQUNwQk0sUUFBUUUsR0FBRyxDQUFDLGVBQWVKLHFCQUFxQkEsbUJBQW1CSyxNQUFNLEdBQUc7QUFDNUVILFFBQVFFLEdBQUcsQ0FBQyxlQUFlSixxQkFBcUJBLG1CQUFtQk0sU0FBUyxDQUFDLEdBQUcsS0FBSyxRQUFRO0FBRTdGLG1FQUFtRTtBQUNuRSxNQUFNQyxnQkFBZ0JaLG1FQUFZQSxDQUFDQyxhQUFhSSxvQkFBb0I7SUFDbEVRLE1BQU07UUFDSkMsa0JBQWtCO1FBQ2xCQyxnQkFBZ0I7SUFDbEI7SUFDQSx5Q0FBeUM7SUFDekNDLElBQUk7UUFDRkMsUUFBUTtJQUNWO0lBQ0FDLFFBQVE7UUFDTkMsU0FBUztZQUNQLHlCQUF5QjtRQUMzQjtJQUNGO0FBQ0Y7QUFFQSxrQkFBa0I7QUFDbEIsZUFBZUM7SUFDYixJQUFJO1FBQ0ZiLFFBQVFFLEdBQUcsQ0FBQztRQUNaLE1BQU0sRUFBRVksSUFBSSxFQUFFYixLQUFLLEVBQUVjLE1BQU0sRUFBRUMsVUFBVSxFQUFFLEdBQUcsTUFBTVgsY0FDL0NZLElBQUksQ0FBQyxpQkFDTEMsTUFBTSxDQUFDLHNDQUNQQyxLQUFLLENBQUM7UUFFVCxJQUFJbEIsT0FBTztZQUNURCxRQUFRQyxLQUFLLENBQUMsa0RBQWtEO2dCQUM5REE7Z0JBQ0FjO2dCQUNBQztnQkFDQUksY0FBY25CLE1BQU1vQixPQUFPO1lBQzdCO1FBQ0YsT0FBTztZQUNMckIsUUFBUUUsR0FBRyxDQUFDO1lBQ1pGLFFBQVFFLEdBQUcsQ0FBQyxvQkFBb0JZO1FBQ2xDO0lBQ0YsRUFBRSxPQUFPUSxHQUFHO1FBQ1Z0QixRQUFRQyxLQUFLLENBQUMseUNBQXlDcUI7SUFDekQ7QUFDRjtBQUVBLGdEQUFnRDtBQUNoRFQ7QUFFQSxpRUFBZVIsYUFBYUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2dyb3Vwc2hhcmUtcHJvamVjdC8uL3NyYy9saWIvc3VwYWJhc2UtYWRtaW4tY2xpZW50LmpzPzlhZDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcclxuXHJcbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMO1xyXG5jb25zdCBzdXBhYmFzZVNlcnZpY2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX0tFWTtcclxuXHJcbmlmICghc3VwYWJhc2VVcmwgfHwgIXN1cGFiYXNlU2VydmljZUtleSkge1xyXG4gIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAnTWlzc2luZyBlbnZpcm9ubWVudCB2YXJpYWJsZXM6IE5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCBvciBTVVBBQkFTRV9TRVJWSUNFX0tFWSdcclxuICApO1xyXG59XHJcblxyXG4vLyBEb2RhaiBkaWFnbm9zdHljem5lIGluZm9ybWFjamVcclxuY29uc29sZS5sb2coXCJJbmljamFsaXphY2phIHN1cGFiYXNlQWRtaW4geiBrbHVjemVtIHNlcndpc293eW1cIik7XHJcbmNvbnNvbGUubG9nKFwiVVJMOlwiLCBzdXBhYmFzZVVybCk7XHJcbmNvbnNvbGUubG9nKFwiS2V5IGxlbmd0aDpcIiwgc3VwYWJhc2VTZXJ2aWNlS2V5ID8gc3VwYWJhc2VTZXJ2aWNlS2V5Lmxlbmd0aCA6IDApO1xyXG5jb25zb2xlLmxvZyhcIktleSBwcmVmaXg6XCIsIHN1cGFiYXNlU2VydmljZUtleSA/IHN1cGFiYXNlU2VydmljZUtleS5zdWJzdHJpbmcoMCwgNSkgKyAnLi4uJyA6ICd1bmRlZmluZWQnKTtcclxuXHJcbi8vIEtsaWVudCB6IHVwcmF3bmllbmlhbWkgYWRtaW5pc3RyYXRvcmEsIHXFvHl3YW55IFRZTEtPIG5hIHNlcndlcnplXHJcbmNvbnN0IHN1cGFiYXNlQWRtaW4gPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlU2VydmljZUtleSwge1xyXG4gIGF1dGg6IHtcclxuICAgIGF1dG9SZWZyZXNoVG9rZW46IGZhbHNlLFxyXG4gICAgcGVyc2lzdFNlc3Npb246IGZhbHNlXHJcbiAgfSxcclxuICAvLyBXecWCxIVjeiBSTFMgLSBzcHLDs2J1am15IHLDs8W8bmUgcG9kZWrFm2NpYVxyXG4gIGRiOiB7XHJcbiAgICBzY2hlbWE6ICdwdWJsaWMnXHJcbiAgfSxcclxuICBnbG9iYWw6IHtcclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgJ3gtc3VwYWJhc2UtYnlwYXNzLXJscyc6ICd0cnVlJ1xyXG4gICAgfVxyXG4gIH1cclxufSk7XHJcblxyXG4vLyBUZXN0IHBvxYLEhWN6ZW5pYVxyXG5hc3luYyBmdW5jdGlvbiB0ZXN0Q29ubmVjdGlvbigpIHtcclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coXCJQcsOzYmEgcG9icmFuaWEgcHJvZmlsaSB1xbx5dGtvd25pa8Ozd1wiKTtcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IsIHN0YXR1cywgc3RhdHVzVGV4dCB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAuZnJvbSgndXNlcl9wcm9maWxlcycpXHJcbiAgICAgIC5zZWxlY3QoJ2lkLCBleHRlcm5hbF9hdXRoX2lkLCBkaXNwbGF5X25hbWUnKVxyXG4gICAgICAubGltaXQoNSk7XHJcbiAgICBcclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdCxYLEhWQgdGVzdG93ZWdvIHBvxYLEhWN6ZW5pYSBkbyBTdXBhYmFzZSAoYWRtaW4pOicsIHtcclxuICAgICAgICBlcnJvcixcclxuICAgICAgICBzdGF0dXMsXHJcbiAgICAgICAgc3RhdHVzVGV4dCxcclxuICAgICAgICBlcnJvckRldGFpbHM6IGVycm9yLmRldGFpbHNcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZygnUG9tecWbbG5lIHRlc3Rvd2UgcG/FgsSFY3plbmllIGRvIFN1cGFiYXNlIChhZG1pbiknKTtcclxuICAgICAgY29uc29sZS5sb2coJ1BvYnJhbmUgcHJvZmlsZTonLCBkYXRhKTtcclxuICAgIH1cclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdXeWrEhXRlayBwb2RjemFzIHRlc3Rvd2VnbyBwb8WCxIVjemVuaWE6JywgZSk7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBVcnVjaG9tIHRlc3QgcG/FgsSFY3plbmlhIHBvZGN6YXMgaW5pY2phbGl6YWNqaVxyXG50ZXN0Q29ubmVjdGlvbigpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgc3VwYWJhc2VBZG1pbjsiXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VTZXJ2aWNlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9LRVkiLCJjb25zb2xlIiwiZXJyb3IiLCJsb2ciLCJsZW5ndGgiLCJzdWJzdHJpbmciLCJzdXBhYmFzZUFkbWluIiwiYXV0aCIsImF1dG9SZWZyZXNoVG9rZW4iLCJwZXJzaXN0U2Vzc2lvbiIsImRiIiwic2NoZW1hIiwiZ2xvYmFsIiwiaGVhZGVycyIsInRlc3RDb25uZWN0aW9uIiwiZGF0YSIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJmcm9tIiwic2VsZWN0IiwibGltaXQiLCJlcnJvckRldGFpbHMiLCJkZXRhaWxzIiwiZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase-admin-client.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase-client.js":
/*!************************************!*\
  !*** ./src/lib/supabase-client.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSupabaseClient: () => (/* binding */ createSupabaseClient),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getSubscriptionOffers: () => (/* binding */ getSubscriptionOffers),\n/* harmony export */   handleSupabaseError: () => (/* binding */ handleSupabaseError)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\n// Initialize the Supabase client\nconst supabaseUrl = \"https://twiarwghktzljergqfsm.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3aWFyd2doa3R6bGplcmdxZnNtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQwMTcxMjQsImV4cCI6MjA1OTU5MzEyNH0.TtgGfR9sAFu3ipD8bpLsFhZl0ECxYMBodeAEOsx9u6Y\";\n// Check if environment variables are set\nif (!supabaseUrl || !supabaseAnonKey) {\n    console.error(\"Missing environment variables: NEXT_PUBLIC_SUPABASE_URL or NEXT_PUBLIC_SUPABASE_ANON_KEY\");\n}\n// Create a single instance of the Supabase client to reuse across the app\n// This client is for unauthenticated operations only\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n// Helper function to create a authenticated client with a Clerk token\nconst createSupabaseClient = (clerkToken)=>{\n    if (clerkToken) {\n        return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey, {\n            global: {\n                headers: {\n                    Authorization: `Bearer ${clerkToken}`\n                }\n            }\n        });\n    }\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n};\n/**\r\n * Pobiera oferty subskrypcji z możliwością filtrowania\r\n * @param {Object} filters - Filtry do zapytania\r\n * @param {string} filters.platformId - ID platformy do filtrowania\r\n * @param {number} filters.minPrice - Minimalna cena\r\n * @param {number} filters.maxPrice - Maksymalna cena\r\n * @param {boolean} filters.availableSlots - Czy pokazywać tylko oferty z dostępnymi miejscami\r\n * @param {string} filters.orderBy - Pole do sortowania\r\n * @param {boolean} filters.ascending - Kierunek sortowania (rosnąco/malejąco)\r\n * @param {number} filters.limit - Limit wyników\r\n * @param {number} filters.offset - Przesunięcie wyników (paginacja)\r\n * @returns {Promise<Array>} - Lista ofert subskrypcji\r\n */ async function getSubscriptionOffers(filters = {}) {\n    try {\n        // Przygotowanie zapytania\n        let query = supabase.from(\"group_subs\").select(`\r\n        *,\r\n        subscription_platforms(*),\r\n        groups(id, name, description),\r\n        owner:groups!inner(owner_id, user_profiles!inner(id, display_name, avatar_url, rating_avg, rating_count, verification_level))\r\n      `).eq(\"status\", \"active\");\n        // Dodaj filtr na platformę\n        if (filters.platformId) {\n            query = query.eq(\"platform_id\", filters.platformId);\n        }\n        // Dodaj filtr na cenę minimalną\n        if (filters.minPrice !== undefined && !isNaN(filters.minPrice)) {\n            query = query.gte(\"price_per_slot\", filters.minPrice);\n        }\n        // Dodaj filtr na cenę maksymalną\n        if (filters.maxPrice !== undefined && !isNaN(filters.maxPrice)) {\n            query = query.lte(\"price_per_slot\", filters.maxPrice);\n        }\n        // Filtruj oferty tylko z dostępnymi miejscami\n        if (filters.availableSlots !== false) {\n            query = query.gt(\"slots_available\", 0);\n        }\n        // Sortowanie\n        const orderBy = filters.orderBy || \"created_at\";\n        const ascending = filters.ascending || false;\n        query = query.order(orderBy, {\n            ascending\n        });\n        // Limit i paginacja\n        if (filters.limit) {\n            query = query.limit(filters.limit);\n        }\n        if (filters.offset) {\n            query = query.offset(filters.offset);\n        }\n        // Wykonaj zapytanie\n        const { data, error } = await query;\n        if (error) {\n            console.error(\"Error fetching subscription offers:\", error);\n            throw error;\n        }\n        return data || [];\n    } catch (error) {\n        console.error(\"Error in getSubscriptionOffers:\", error);\n        throw error;\n    }\n}\n// Helper function to handle Supabase errors consistently\nconst handleSupabaseError = (error)=>{\n    console.error(\"Supabase error:\", error);\n    // Return a standardized error object\n    return {\n        error: true,\n        message: error.message || \"An unexpected error occurred\",\n        code: error.code || \"unknown_error\",\n        details: error.details || null\n    };\n};\n// Export the default Supabase client (without auth)\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (supabase);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0FBUy9CLE1BQU0rQixPQUFPLElBQUk7SUFDNUI7QUFDRixFQUFFO0FBRUYsb0RBQW9EO0FBQ3BELGlFQUFlOUIsUUFBUUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2dyb3Vwc2hhcmUtcHJvamVjdC8uL3NyYy9saWIvc3VwYWJhc2UtY2xpZW50LmpzPzZiMjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcclxuXHJcbi8vIEluaXRpYWxpemUgdGhlIFN1cGFiYXNlIGNsaWVudFxyXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDtcclxuY29uc3Qgc3VwYWJhc2VBbm9uS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVk7XHJcblxyXG4vLyBDaGVjayBpZiBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYXJlIHNldFxyXG5pZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUFub25LZXkpIHtcclxuICBjb25zb2xlLmVycm9yKFxyXG4gICAgJ01pc3NpbmcgZW52aXJvbm1lbnQgdmFyaWFibGVzOiBORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgb3IgTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVknXHJcbiAgKTtcclxufVxyXG5cclxuLy8gQ3JlYXRlIGEgc2luZ2xlIGluc3RhbmNlIG9mIHRoZSBTdXBhYmFzZSBjbGllbnQgdG8gcmV1c2UgYWNyb3NzIHRoZSBhcHBcclxuLy8gVGhpcyBjbGllbnQgaXMgZm9yIHVuYXV0aGVudGljYXRlZCBvcGVyYXRpb25zIG9ubHlcclxuY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlQW5vbktleSk7XHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gY3JlYXRlIGEgYXV0aGVudGljYXRlZCBjbGllbnQgd2l0aCBhIENsZXJrIHRva2VuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVTdXBhYmFzZUNsaWVudCA9IChjbGVya1Rva2VuKSA9PiB7XHJcbiAgaWYgKGNsZXJrVG9rZW4pIHtcclxuICAgIHJldHVybiBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlQW5vbktleSwge1xyXG4gICAgICBnbG9iYWw6IHtcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7Y2xlcmtUb2tlbn1gXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBQb2JpZXJhIG9mZXJ0eSBzdWJza3J5cGNqaSB6IG1vxbxsaXdvxZtjacSFIGZpbHRyb3dhbmlhXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBmaWx0ZXJzIC0gRmlsdHJ5IGRvIHphcHl0YW5pYVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gZmlsdGVycy5wbGF0Zm9ybUlkIC0gSUQgcGxhdGZvcm15IGRvIGZpbHRyb3dhbmlhXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBmaWx0ZXJzLm1pblByaWNlIC0gTWluaW1hbG5hIGNlbmFcclxuICogQHBhcmFtIHtudW1iZXJ9IGZpbHRlcnMubWF4UHJpY2UgLSBNYWtzeW1hbG5hIGNlbmFcclxuICogQHBhcmFtIHtib29sZWFufSBmaWx0ZXJzLmF2YWlsYWJsZVNsb3RzIC0gQ3p5IHBva2F6eXdhxIcgdHlsa28gb2ZlcnR5IHogZG9zdMSZcG55bWkgbWllanNjYW1pXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWx0ZXJzLm9yZGVyQnkgLSBQb2xlIGRvIHNvcnRvd2FuaWFcclxuICogQHBhcmFtIHtib29sZWFufSBmaWx0ZXJzLmFzY2VuZGluZyAtIEtpZXJ1bmVrIHNvcnRvd2FuaWEgKHJvc27EhWNvL21hbGVqxIVjbylcclxuICogQHBhcmFtIHtudW1iZXJ9IGZpbHRlcnMubGltaXQgLSBMaW1pdCB3eW5pa8Ozd1xyXG4gKiBAcGFyYW0ge251bWJlcn0gZmlsdGVycy5vZmZzZXQgLSBQcnplc3VuacSZY2llIHd5bmlrw7N3IChwYWdpbmFjamEpXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPEFycmF5Pn0gLSBMaXN0YSBvZmVydCBzdWJza3J5cGNqaVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFN1YnNjcmlwdGlvbk9mZmVycyhmaWx0ZXJzID0ge30pIHtcclxuICB0cnkge1xyXG4gICAgLy8gUHJ6eWdvdG93YW5pZSB6YXB5dGFuaWFcclxuICAgIGxldCBxdWVyeSA9IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdncm91cF9zdWJzJylcclxuICAgICAgLnNlbGVjdChgXHJcbiAgICAgICAgKixcclxuICAgICAgICBzdWJzY3JpcHRpb25fcGxhdGZvcm1zKCopLFxyXG4gICAgICAgIGdyb3VwcyhpZCwgbmFtZSwgZGVzY3JpcHRpb24pLFxyXG4gICAgICAgIG93bmVyOmdyb3VwcyFpbm5lcihvd25lcl9pZCwgdXNlcl9wcm9maWxlcyFpbm5lcihpZCwgZGlzcGxheV9uYW1lLCBhdmF0YXJfdXJsLCByYXRpbmdfYXZnLCByYXRpbmdfY291bnQsIHZlcmlmaWNhdGlvbl9sZXZlbCkpXHJcbiAgICAgIGApXHJcbiAgICAgIC5lcSgnc3RhdHVzJywgJ2FjdGl2ZScpO1xyXG4gICAgXHJcbiAgICAvLyBEb2RhaiBmaWx0ciBuYSBwbGF0Zm9ybcSZXHJcbiAgICBpZiAoZmlsdGVycy5wbGF0Zm9ybUlkKSB7XHJcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ3BsYXRmb3JtX2lkJywgZmlsdGVycy5wbGF0Zm9ybUlkKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gRG9kYWogZmlsdHIgbmEgY2VuxJkgbWluaW1hbG7EhVxyXG4gICAgaWYgKGZpbHRlcnMubWluUHJpY2UgIT09IHVuZGVmaW5lZCAmJiAhaXNOYU4oZmlsdGVycy5taW5QcmljZSkpIHtcclxuICAgICAgcXVlcnkgPSBxdWVyeS5ndGUoJ3ByaWNlX3Blcl9zbG90JywgZmlsdGVycy5taW5QcmljZSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIERvZGFqIGZpbHRyIG5hIGNlbsSZIG1ha3N5bWFsbsSFXHJcbiAgICBpZiAoZmlsdGVycy5tYXhQcmljZSAhPT0gdW5kZWZpbmVkICYmICFpc05hTihmaWx0ZXJzLm1heFByaWNlKSkge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5Lmx0ZSgncHJpY2VfcGVyX3Nsb3QnLCBmaWx0ZXJzLm1heFByaWNlKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gRmlsdHJ1aiBvZmVydHkgdHlsa28geiBkb3N0xJlwbnltaSBtaWVqc2NhbWlcclxuICAgIGlmIChmaWx0ZXJzLmF2YWlsYWJsZVNsb3RzICE9PSBmYWxzZSkge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5Lmd0KCdzbG90c19hdmFpbGFibGUnLCAwKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gU29ydG93YW5pZVxyXG4gICAgY29uc3Qgb3JkZXJCeSA9IGZpbHRlcnMub3JkZXJCeSB8fCAnY3JlYXRlZF9hdCc7XHJcbiAgICBjb25zdCBhc2NlbmRpbmcgPSBmaWx0ZXJzLmFzY2VuZGluZyB8fCBmYWxzZTtcclxuICAgIHF1ZXJ5ID0gcXVlcnkub3JkZXIob3JkZXJCeSwgeyBhc2NlbmRpbmcgfSk7XHJcbiAgICBcclxuICAgIC8vIExpbWl0IGkgcGFnaW5hY2phXHJcbiAgICBpZiAoZmlsdGVycy5saW1pdCkge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5LmxpbWl0KGZpbHRlcnMubGltaXQpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoZmlsdGVycy5vZmZzZXQpIHtcclxuICAgICAgcXVlcnkgPSBxdWVyeS5vZmZzZXQoZmlsdGVycy5vZmZzZXQpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBXeWtvbmFqIHphcHl0YW5pZVxyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgcXVlcnk7XHJcbiAgICBcclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBzdWJzY3JpcHRpb24gb2ZmZXJzOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBkYXRhIHx8IFtdO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBnZXRTdWJzY3JpcHRpb25PZmZlcnM6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gaGFuZGxlIFN1cGFiYXNlIGVycm9ycyBjb25zaXN0ZW50bHlcclxuZXhwb3J0IGNvbnN0IGhhbmRsZVN1cGFiYXNlRXJyb3IgPSAoZXJyb3IpID0+IHtcclxuICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBlcnJvcjonLCBlcnJvcik7XHJcbiAgXHJcbiAgLy8gUmV0dXJuIGEgc3RhbmRhcmRpemVkIGVycm9yIG9iamVjdFxyXG4gIHJldHVybiB7XHJcbiAgICBlcnJvcjogdHJ1ZSxcclxuICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfHwgJ0FuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQnLFxyXG4gICAgY29kZTogZXJyb3IuY29kZSB8fCAndW5rbm93bl9lcnJvcicsXHJcbiAgICBkZXRhaWxzOiBlcnJvci5kZXRhaWxzIHx8IG51bGwsXHJcbiAgfTtcclxufTtcclxuXHJcbi8vIEV4cG9ydCB0aGUgZGVmYXVsdCBTdXBhYmFzZSBjbGllbnQgKHdpdGhvdXQgYXV0aClcclxuZXhwb3J0IGRlZmF1bHQgc3VwYWJhc2U7Il0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiY29uc29sZSIsImVycm9yIiwic3VwYWJhc2UiLCJjcmVhdGVTdXBhYmFzZUNsaWVudCIsImNsZXJrVG9rZW4iLCJnbG9iYWwiLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsImdldFN1YnNjcmlwdGlvbk9mZmVycyIsImZpbHRlcnMiLCJxdWVyeSIsImZyb20iLCJzZWxlY3QiLCJlcSIsInBsYXRmb3JtSWQiLCJtaW5QcmljZSIsInVuZGVmaW5lZCIsImlzTmFOIiwiZ3RlIiwibWF4UHJpY2UiLCJsdGUiLCJhdmFpbGFibGVTbG90cyIsImd0Iiwib3JkZXJCeSIsImFzY2VuZGluZyIsIm9yZGVyIiwibGltaXQiLCJvZmZzZXQiLCJkYXRhIiwiaGFuZGxlU3VwYWJhc2VFcnJvciIsIm1lc3NhZ2UiLCJjb2RlIiwiZGV0YWlscyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase-client.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@clerk","vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/tslib","vendor-chunks/webidl-conversions","vendor-chunks/cookie","vendor-chunks/map-obj","vendor-chunks/no-case","vendor-chunks/lower-case","vendor-chunks/snakecase-keys","vendor-chunks/snake-case","vendor-chunks/dot-case"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fprofile%2Froute&page=%2Fapi%2Fauth%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fprofile%2Froute.js&appDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShareClerk_Supabase%5Cgroupshare-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShareClerk_Supabase%5Cgroupshare-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();