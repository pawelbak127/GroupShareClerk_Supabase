"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/offers/route";
exports.ids = ["app/api/offers/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "node:async_hooks":
/*!***********************************!*\
  !*** external "node:async_hooks" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("node:async_hooks");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Foffers%2Froute&page=%2Fapi%2Foffers%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Foffers%2Froute.js&appDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShareClerk_Supabase%5Cgroupshare-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShareClerk_Supabase%5Cgroupshare-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Foffers%2Froute&page=%2Fapi%2Foffers%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Foffers%2Froute.js&appDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShareClerk_Supabase%5Cgroupshare-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShareClerk_Supabase%5Cgroupshare-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_bacze_Project_GroupShareClerk_Supabase_groupshare_project_src_app_api_offers_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/offers/route.js */ \"(rsc)/./src/app/api/offers/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/offers/route\",\n        pathname: \"/api/offers\",\n        filename: \"route\",\n        bundlePath: \"app/api/offers/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\bacze\\\\Project\\\\GroupShareClerk_Supabase\\\\groupshare-project\\\\src\\\\app\\\\api\\\\offers\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_bacze_Project_GroupShareClerk_Supabase_groupshare_project_src_app_api_offers_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/offers/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZvZmZlcnMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRm9mZmVycyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRm9mZmVycyUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNiYWN6ZSU1Q1Byb2plY3QlNUNHcm91cFNoYXJlQ2xlcmtfU3VwYWJhc2UlNUNncm91cHNoYXJlLXByb2plY3QlNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q2JhY3plJTVDUHJvamVjdCU1Q0dyb3VwU2hhcmVDbGVya19TdXBhYmFzZSU1Q2dyb3Vwc2hhcmUtcHJvamVjdCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDd0Q7QUFDckk7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncm91cHNoYXJlLXByb2plY3QvP2NmYzMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcYmFjemVcXFxcUHJvamVjdFxcXFxHcm91cFNoYXJlQ2xlcmtfU3VwYWJhc2VcXFxcZ3JvdXBzaGFyZS1wcm9qZWN0XFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXG9mZmVyc1xcXFxyb3V0ZS5qc1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvb2ZmZXJzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvb2ZmZXJzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9vZmZlcnMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxiYWN6ZVxcXFxQcm9qZWN0XFxcXEdyb3VwU2hhcmVDbGVya19TdXBhYmFzZVxcXFxncm91cHNoYXJlLXByb2plY3RcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcb2ZmZXJzXFxcXHJvdXRlLmpzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9vZmZlcnMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Foffers%2Froute&page=%2Fapi%2Foffers%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Foffers%2Froute.js&appDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShareClerk_Supabase%5Cgroupshare-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShareClerk_Supabase%5Cgroupshare-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/offers/route.js":
/*!*************************************!*\
  !*** ./src/app/api/offers/route.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @clerk/nextjs/server */ \"(rsc)/./node_modules/@clerk/nextjs/dist/esm/app-router/server/currentUser.js\");\n/* harmony import */ var _lib_auth_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/auth-service */ \"(rsc)/./src/lib/auth-service.js\");\n/* harmony import */ var _lib_clerk_supabase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/clerk-supabase */ \"(rsc)/./src/lib/clerk-supabase.js\");\n/* harmony import */ var _lib_supabase_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../lib/supabase-client */ \"(rsc)/./src/lib/supabase-client.js\");\nconst dynamic = \"force-dynamic\";\n\n\n\n\n\n/**\r\n * GET /api/offers\r\n * Get subscription offers with optional filtering\r\n */ async function GET(request) {\n    try {\n        // Parse query parameters\n        const { searchParams } = new URL(request.url);\n        // Pobierz uwierzytelnionego użytkownika, jeśli dostępny\n        const user = await (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_4__.currentUser)();\n        // Parse filters from query parameters\n        const filters = {\n            platformId: searchParams.get(\"platformId\") || undefined,\n            minPrice: searchParams.get(\"minPrice\") ? parseFloat(searchParams.get(\"minPrice\")) : undefined,\n            maxPrice: searchParams.get(\"maxPrice\") ? parseFloat(searchParams.get(\"maxPrice\")) : undefined,\n            availableSlots: searchParams.get(\"availableSlots\") !== \"false\",\n            orderBy: searchParams.get(\"orderBy\") || \"created_at\",\n            ascending: searchParams.get(\"ascending\") === \"true\",\n            limit: searchParams.get(\"limit\") ? parseInt(searchParams.get(\"limit\")) : 10,\n            offset: searchParams.get(\"offset\") ? parseInt(searchParams.get(\"offset\")) : 0\n        };\n        // Get subscription offers with filters, przekaż uwierzytelnionego użytkownika\n        const offers = await (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_3__.getSubscriptionOffers)(filters, user);\n        // Return the offers\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(offers);\n    } catch (error) {\n        console.error(\"Error fetching offers:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error.message || \"Failed to fetch subscription offers\",\n            code: error.code || \"unknown\"\n        }, {\n            status: 500\n        });\n    }\n}\n/**\r\n * POST /api/offers\r\n * Create a new subscription offer\r\n */ async function POST(request) {\n    try {\n        // Verify user is authenticated\n        const user = await (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_4__.currentUser)();\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const supabaseAuth = await (0,_lib_clerk_supabase__WEBPACK_IMPORTED_MODULE_2__.getAuthenticatedSupabaseClient)(user);\n        const profile = await (0,_lib_auth_service__WEBPACK_IMPORTED_MODULE_1__.getCurrentUserProfile)();\n        // Parse request body\n        const body = await request.json();\n        // Validate required fields\n        const requiredFields = [\n            \"groupId\",\n            \"platformId\",\n            \"slotsTotal\",\n            \"pricePerSlot\",\n            \"accessInstructions\"\n        ];\n        for (const field of requiredFields){\n            if (!body[field]) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: `Missing required field: ${field}`\n                }, {\n                    status: 400\n                });\n            }\n        }\n        // Validate numeric fields\n        if (isNaN(parseFloat(body.pricePerSlot)) || parseFloat(body.pricePerSlot) <= 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Price per slot must be a positive number\"\n            }, {\n                status: 400\n            });\n        }\n        if (!Number.isInteger(body.slotsTotal) || body.slotsTotal <= 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Slots total must be a positive integer\"\n            }, {\n                status: 400\n            });\n        }\n        // Verify user is the owner or admin of the group using RLS\n        // Since we're using authenticated Supabase client, policies will enforce this\n        // Prepare the offer data\n        const offerData = {\n            group_id: body.groupId,\n            platform_id: body.platformId,\n            status: \"active\",\n            slots_total: body.slotsTotal,\n            slots_available: body.slotsTotal,\n            price_per_slot: body.pricePerSlot,\n            currency: body.currency || \"PLN\",\n            instant_access: true // All offers now have instant access\n        };\n        // Create the offer in Supabase\n        const { data: createdOffer, error } = await supabaseAuth.from(\"group_subs\").insert(offerData).select().single();\n        if (error) {\n            console.error(\"Error creating offer:\", error);\n            if (error.code === \"42501\") {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"You do not have permission to create offers for this group\"\n                }, {\n                    status: 403\n                });\n            } else if (error.code === \"23503\") {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Group or platform not found\"\n                }, {\n                    status: 400\n                });\n            } else {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: error.message || \"Failed to create subscription offer\"\n                }, {\n                    status: 500\n                });\n            }\n        }\n        // Check result\n        if (!createdOffer || !createdOffer.id) {\n            console.warn(\"Offer creation response missing ID\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Offer was created but returned invalid data\"\n            }, {\n                status: 500\n            });\n        }\n        // Store access instructions\n        try {\n            const instructionsResponse = await supabaseAuth.from(\"access_instructions\").insert({\n                group_sub_id: createdOffer.id,\n                instructions: body.accessInstructions,\n                updated_at: new Date().toISOString()\n            });\n            if (instructionsResponse.error) {\n                console.error(\"Failed to save access instructions:\", instructionsResponse.error);\n            }\n        } catch (error) {\n            console.error(\"Error saving access instructions:\", error);\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(createdOffer, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"Error creating offer:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error.message || \"Failed to create subscription offer\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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c0IsZ0JBQWdCLENBQUNBLGFBQWFLLEVBQUUsRUFBRTtZQUNyQzlCLFFBQVErQixJQUFJLENBQUM7WUFDYixPQUFPMUQscURBQVlBLENBQUN5QixJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQThDLEdBQ3ZEO2dCQUFFSSxRQUFRO1lBQUk7UUFFbEI7UUFFQSw0QkFBNEI7UUFDNUIsSUFBSTtZQUNGLE1BQU02Qix1QkFBdUIsTUFBTTNCLGFBQ2hDcUIsSUFBSSxDQUFDLHVCQUNMQyxNQUFNLENBQUM7Z0JBQ05NLGNBQWNSLGFBQWFLLEVBQUU7Z0JBQzdCSSxjQUFjM0IsS0FBSzRCLGtCQUFrQjtnQkFDckNDLFlBQVksSUFBSUMsT0FBT0MsV0FBVztZQUNwQztZQUVGLElBQUlOLHFCQUFxQmpDLEtBQUssRUFBRTtnQkFDOUJDLFFBQVFELEtBQUssQ0FBQyx1Q0FBdUNpQyxxQkFBcUJqQyxLQUFLO1lBQ2pGO1FBQ0YsRUFBRSxPQUFPQSxPQUFPO1lBQ2RDLFFBQVFELEtBQUssQ0FBQyxxQ0FBcUNBO1FBQ3JEO1FBRUEsT0FBTzFCLHFEQUFZQSxDQUFDeUIsSUFBSSxDQUFDMkIsY0FBYztZQUFFdEIsUUFBUTtRQUFJO0lBQ3ZELEVBQUUsT0FBT0osT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMseUJBQXlCQTtRQUN2QyxPQUFPMUIscURBQVlBLENBQUN5QixJQUFJLENBQ3RCO1lBQUVDLE9BQU9BLE1BQU1FLE9BQU8sSUFBSTtRQUFzQyxHQUNoRTtZQUFFRSxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyb3Vwc2hhcmUtcHJvamVjdC8uL3NyYy9hcHAvYXBpL29mZmVycy9yb3V0ZS5qcz85ZjMyIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBkeW5hbWljID0gJ2ZvcmNlLWR5bmFtaWMnO1xyXG5pbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IGN1cnJlbnRVc2VyIH0gZnJvbSAnQGNsZXJrL25leHRqcy9zZXJ2ZXInO1xyXG5pbXBvcnQgeyBnZXRDdXJyZW50VXNlclByb2ZpbGUgfSBmcm9tICcuLi8uLi8uLi9saWIvYXV0aC1zZXJ2aWNlJztcclxuaW1wb3J0IHsgZ2V0QXV0aGVudGljYXRlZFN1cGFiYXNlQ2xpZW50IH0gZnJvbSAnLi4vLi4vLi4vbGliL2NsZXJrLXN1cGFiYXNlJztcclxuaW1wb3J0IHsgZ2V0U3Vic2NyaXB0aW9uT2ZmZXJzIH0gZnJvbSAnLi4vLi4vLi4vbGliL3N1cGFiYXNlLWNsaWVudCc7XHJcblxyXG4vKipcclxuICogR0VUIC9hcGkvb2ZmZXJzXHJcbiAqIEdldCBzdWJzY3JpcHRpb24gb2ZmZXJzIHdpdGggb3B0aW9uYWwgZmlsdGVyaW5nXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgLy8gUGFyc2UgcXVlcnkgcGFyYW1ldGVyc1xyXG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xyXG4gICAgXHJcbiAgICAvLyBQb2JpZXJ6IHV3aWVyenl0ZWxuaW9uZWdvIHXFvHl0a293bmlrYSwgamXFm2xpIGRvc3TEmXBueVxyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGN1cnJlbnRVc2VyKCk7XHJcbiAgICBcclxuICAgIC8vIFBhcnNlIGZpbHRlcnMgZnJvbSBxdWVyeSBwYXJhbWV0ZXJzXHJcbiAgICBjb25zdCBmaWx0ZXJzID0ge1xyXG4gICAgICBwbGF0Zm9ybUlkOiBzZWFyY2hQYXJhbXMuZ2V0KCdwbGF0Zm9ybUlkJykgfHwgdW5kZWZpbmVkLFxyXG4gICAgICBtaW5QcmljZTogc2VhcmNoUGFyYW1zLmdldCgnbWluUHJpY2UnKSA/IHBhcnNlRmxvYXQoc2VhcmNoUGFyYW1zLmdldCgnbWluUHJpY2UnKSkgOiB1bmRlZmluZWQsXHJcbiAgICAgIG1heFByaWNlOiBzZWFyY2hQYXJhbXMuZ2V0KCdtYXhQcmljZScpID8gcGFyc2VGbG9hdChzZWFyY2hQYXJhbXMuZ2V0KCdtYXhQcmljZScpKSA6IHVuZGVmaW5lZCxcclxuICAgICAgYXZhaWxhYmxlU2xvdHM6IHNlYXJjaFBhcmFtcy5nZXQoJ2F2YWlsYWJsZVNsb3RzJykgIT09ICdmYWxzZScsIC8vIERlZmF1bHQgdG8gdHJ1ZVxyXG4gICAgICBvcmRlckJ5OiBzZWFyY2hQYXJhbXMuZ2V0KCdvcmRlckJ5JykgfHwgJ2NyZWF0ZWRfYXQnLFxyXG4gICAgICBhc2NlbmRpbmc6IHNlYXJjaFBhcmFtcy5nZXQoJ2FzY2VuZGluZycpID09PSAndHJ1ZScsXHJcbiAgICAgIGxpbWl0OiBzZWFyY2hQYXJhbXMuZ2V0KCdsaW1pdCcpID8gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldCgnbGltaXQnKSkgOiAxMCxcclxuICAgICAgb2Zmc2V0OiBzZWFyY2hQYXJhbXMuZ2V0KCdvZmZzZXQnKSA/IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ29mZnNldCcpKSA6IDBcclxuICAgIH07XHJcbiAgICBcclxuICAgIC8vIEdldCBzdWJzY3JpcHRpb24gb2ZmZXJzIHdpdGggZmlsdGVycywgcHJ6ZWthxbwgdXdpZXJ6eXRlbG5pb25lZ28gdcW8eXRrb3duaWthXHJcbiAgICBjb25zdCBvZmZlcnMgPSBhd2FpdCBnZXRTdWJzY3JpcHRpb25PZmZlcnMoZmlsdGVycywgdXNlcik7XHJcbiAgICBcclxuICAgIC8vIFJldHVybiB0aGUgb2ZmZXJzXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ob2ZmZXJzKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgb2ZmZXJzOicsIGVycm9yKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnRmFpbGVkIHRvIGZldGNoIHN1YnNjcmlwdGlvbiBvZmZlcnMnLCBjb2RlOiBlcnJvci5jb2RlIHx8ICd1bmtub3duJyB9LCBcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFBPU1QgL2FwaS9vZmZlcnNcclxuICogQ3JlYXRlIGEgbmV3IHN1YnNjcmlwdGlvbiBvZmZlclxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBWZXJpZnkgdXNlciBpcyBhdXRoZW50aWNhdGVkXHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgY3VycmVudFVzZXIoKTtcclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAxIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3Qgc3VwYWJhc2VBdXRoID0gYXdhaXQgZ2V0QXV0aGVudGljYXRlZFN1cGFiYXNlQ2xpZW50KHVzZXIpO1xyXG4gICAgY29uc3QgcHJvZmlsZSA9IGF3YWl0IGdldEN1cnJlbnRVc2VyUHJvZmlsZSgpO1xyXG4gICAgXHJcbiAgICAvLyBQYXJzZSByZXF1ZXN0IGJvZHlcclxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcclxuICAgIFxyXG4gICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzXHJcbiAgICBjb25zdCByZXF1aXJlZEZpZWxkcyA9IFsnZ3JvdXBJZCcsICdwbGF0Zm9ybUlkJywgJ3Nsb3RzVG90YWwnLCAncHJpY2VQZXJTbG90JywgJ2FjY2Vzc0luc3RydWN0aW9ucyddO1xyXG4gICAgZm9yIChjb25zdCBmaWVsZCBvZiByZXF1aXJlZEZpZWxkcykge1xyXG4gICAgICBpZiAoIWJvZHlbZmllbGRdKSB7XHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgeyBlcnJvcjogYE1pc3NpbmcgcmVxdWlyZWQgZmllbGQ6ICR7ZmllbGR9YCB9LFxyXG4gICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBWYWxpZGF0ZSBudW1lcmljIGZpZWxkc1xyXG4gICAgaWYgKGlzTmFOKHBhcnNlRmxvYXQoYm9keS5wcmljZVBlclNsb3QpKSB8fCBwYXJzZUZsb2F0KGJvZHkucHJpY2VQZXJTbG90KSA8PSAwKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnUHJpY2UgcGVyIHNsb3QgbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKGJvZHkuc2xvdHNUb3RhbCkgfHwgYm9keS5zbG90c1RvdGFsIDw9IDApIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdTbG90cyB0b3RhbCBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlcicgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gVmVyaWZ5IHVzZXIgaXMgdGhlIG93bmVyIG9yIGFkbWluIG9mIHRoZSBncm91cCB1c2luZyBSTFNcclxuICAgIC8vIFNpbmNlIHdlJ3JlIHVzaW5nIGF1dGhlbnRpY2F0ZWQgU3VwYWJhc2UgY2xpZW50LCBwb2xpY2llcyB3aWxsIGVuZm9yY2UgdGhpc1xyXG4gICAgXHJcbiAgICAvLyBQcmVwYXJlIHRoZSBvZmZlciBkYXRhXHJcbiAgICBjb25zdCBvZmZlckRhdGEgPSB7XHJcbiAgICAgIGdyb3VwX2lkOiBib2R5Lmdyb3VwSWQsXHJcbiAgICAgIHBsYXRmb3JtX2lkOiBib2R5LnBsYXRmb3JtSWQsXHJcbiAgICAgIHN0YXR1czogJ2FjdGl2ZScsXHJcbiAgICAgIHNsb3RzX3RvdGFsOiBib2R5LnNsb3RzVG90YWwsXHJcbiAgICAgIHNsb3RzX2F2YWlsYWJsZTogYm9keS5zbG90c1RvdGFsLFxyXG4gICAgICBwcmljZV9wZXJfc2xvdDogYm9keS5wcmljZVBlclNsb3QsXHJcbiAgICAgIGN1cnJlbmN5OiBib2R5LmN1cnJlbmN5IHx8ICdQTE4nLFxyXG4gICAgICBpbnN0YW50X2FjY2VzczogdHJ1ZSAvLyBBbGwgb2ZmZXJzIG5vdyBoYXZlIGluc3RhbnQgYWNjZXNzXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAvLyBDcmVhdGUgdGhlIG9mZmVyIGluIFN1cGFiYXNlXHJcbiAgICBjb25zdCB7IGRhdGE6IGNyZWF0ZWRPZmZlciwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQXV0aFxyXG4gICAgICAuZnJvbSgnZ3JvdXBfc3VicycpXHJcbiAgICAgIC5pbnNlcnQob2ZmZXJEYXRhKVxyXG4gICAgICAuc2VsZWN0KClcclxuICAgICAgLnNpbmdsZSgpO1xyXG4gICAgXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgb2ZmZXI6JywgZXJyb3IpO1xyXG4gICAgICBcclxuICAgICAgaWYgKGVycm9yLmNvZGUgPT09ICc0MjUwMScpIHtcclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICB7IGVycm9yOiAnWW91IGRvIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gY3JlYXRlIG9mZmVycyBmb3IgdGhpcyBncm91cCcgfSxcclxuICAgICAgICAgIHsgc3RhdHVzOiA0MDMgfVxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSBpZiAoZXJyb3IuY29kZSA9PT0gJzIzNTAzJykge1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgIHsgZXJyb3I6ICdHcm91cCBvciBwbGF0Zm9ybSBub3QgZm91bmQnIH0sXHJcbiAgICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgICApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgIHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBjcmVhdGUgc3Vic2NyaXB0aW9uIG9mZmVyJyB9LFxyXG4gICAgICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBDaGVjayByZXN1bHRcclxuICAgIGlmICghY3JlYXRlZE9mZmVyIHx8ICFjcmVhdGVkT2ZmZXIuaWQpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdPZmZlciBjcmVhdGlvbiByZXNwb25zZSBtaXNzaW5nIElEJyk7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnT2ZmZXIgd2FzIGNyZWF0ZWQgYnV0IHJldHVybmVkIGludmFsaWQgZGF0YScgfSxcclxuICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gU3RvcmUgYWNjZXNzIGluc3RydWN0aW9uc1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25zUmVzcG9uc2UgPSBhd2FpdCBzdXBhYmFzZUF1dGhcclxuICAgICAgICAuZnJvbSgnYWNjZXNzX2luc3RydWN0aW9ucycpXHJcbiAgICAgICAgLmluc2VydCh7XHJcbiAgICAgICAgICBncm91cF9zdWJfaWQ6IGNyZWF0ZWRPZmZlci5pZCxcclxuICAgICAgICAgIGluc3RydWN0aW9uczogYm9keS5hY2Nlc3NJbnN0cnVjdGlvbnMsXHJcbiAgICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIGlmIChpbnN0cnVjdGlvbnNSZXNwb25zZS5lcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzYXZlIGFjY2VzcyBpbnN0cnVjdGlvbnM6JywgaW5zdHJ1Y3Rpb25zUmVzcG9uc2UuZXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgYWNjZXNzIGluc3RydWN0aW9uczonLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihjcmVhdGVkT2ZmZXIsIHsgc3RhdHVzOiAyMDEgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIG9mZmVyOicsIGVycm9yKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnRmFpbGVkIHRvIGNyZWF0ZSBzdWJzY3JpcHRpb24gb2ZmZXInIH0sIFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICk7XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbImR5bmFtaWMiLCJOZXh0UmVzcG9uc2UiLCJjdXJyZW50VXNlciIsImdldEN1cnJlbnRVc2VyUHJvZmlsZSIsImdldEF1dGhlbnRpY2F0ZWRTdXBhYmFzZUNsaWVudCIsImdldFN1YnNjcmlwdGlvbk9mZmVycyIsIkdFVCIsInJlcXVlc3QiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJ1c2VyIiwiZmlsdGVycyIsInBsYXRmb3JtSWQiLCJnZXQiLCJ1bmRlZmluZWQiLCJtaW5QcmljZSIsInBhcnNlRmxvYXQiLCJtYXhQcmljZSIsImF2YWlsYWJsZVNsb3RzIiwib3JkZXJCeSIsImFzY2VuZGluZyIsImxpbWl0IiwicGFyc2VJbnQiLCJvZmZzZXQiLCJvZmZlcnMiLCJqc29uIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsImNvZGUiLCJzdGF0dXMiLCJQT1NUIiwic3VwYWJhc2VBdXRoIiwicHJvZmlsZSIsImJvZHkiLCJyZXF1aXJlZEZpZWxkcyIsImZpZWxkIiwiaXNOYU4iLCJwcmljZVBlclNsb3QiLCJOdW1iZXIiLCJpc0ludGVnZXIiLCJzbG90c1RvdGFsIiwib2ZmZXJEYXRhIiwiZ3JvdXBfaWQiLCJncm91cElkIiwicGxhdGZvcm1faWQiLCJzbG90c190b3RhbCIsInNsb3RzX2F2YWlsYWJsZSIsInByaWNlX3Blcl9zbG90IiwiY3VycmVuY3kiLCJpbnN0YW50X2FjY2VzcyIsImRhdGEiLCJjcmVhdGVkT2ZmZXIiLCJmcm9tIiwiaW5zZXJ0Iiwic2VsZWN0Iiwic2luZ2xlIiwiaWQiLCJ3YXJuIiwiaW5zdHJ1Y3Rpb25zUmVzcG9uc2UiLCJncm91cF9zdWJfaWQiLCJpbnN0cnVjdGlvbnMiLCJhY2Nlc3NJbnN0cnVjdGlvbnMiLCJ1cGRhdGVkX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/offers/route.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth-service.js":
/*!*********************************!*\
  !*** ./src/lib/auth-service.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCurrentUserProfile: () => (/* binding */ getCurrentUserProfile),\n/* harmony export */   getOrCreateUserProfile: () => (/* binding */ getOrCreateUserProfile),\n/* harmony export */   getUserProfileWithAuth: () => (/* binding */ getUserProfileWithAuth),\n/* harmony export */   updateUserProfile: () => (/* binding */ updateUserProfile),\n/* harmony export */   verifyUserSession: () => (/* binding */ verifyUserSession)\n/* harmony export */ });\n/* harmony import */ var _clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @clerk/nextjs/server */ \"(rsc)/./node_modules/@clerk/nextjs/dist/esm/app-router/server/currentUser.js\");\n/* harmony import */ var _supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./supabase-admin-client */ \"(rsc)/./src/lib/supabase-admin-client.js\");\n/* harmony import */ var _supabase_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./supabase-server */ \"(rsc)/./src/lib/supabase-server.js\");\n\n\n\n/**\r\n * Pobiera aktualny profil użytkownika z bazy danych\r\n */ async function getCurrentUserProfile() {\n    try {\n        const user = await (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_2__.currentUser)();\n        if (!user) {\n            console.log(\"No authenticated user found\");\n            return null;\n        }\n        console.log(\"Getting profile for user:\", user.id);\n        // Używamy supabaseAdmin, które ma pełne uprawnienia (pomija RLS)\n        const { data, error } = await _supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].from(\"user_profiles\").select(\"*\").eq(\"external_auth_id\", user.id).single();\n        if (error) {\n            // Ignorujemy błąd \"nie znaleziono\" (PGRST116)\n            if (error.code === \"PGRST116\") {\n                console.log(\"No profile found for user:\", user.id);\n                return null;\n            }\n            console.error(\"Error fetching user profile:\", error);\n            return null;\n        }\n        console.log(\"Found profile for user:\", user.id);\n        return data;\n    } catch (error) {\n        console.error(\"Exception in getCurrentUserProfile:\", error);\n        return null;\n    }\n}\n/**\r\n * Pobiera profil użytkownika Clerk i tworzy go jeśli nie istnieje\r\n */ async function getOrCreateUserProfile() {\n    try {\n        const user = await (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_2__.currentUser)();\n        if (!user) {\n            console.log(\"No authenticated user found\");\n            return null;\n        }\n        console.log(\"Getting or creating profile for user:\", user.id);\n        // Próba pobrania istniejącego profilu\n        const userProfile = await getCurrentUserProfile();\n        // Jeśli profil istnieje, zwróć go\n        if (userProfile) {\n            return userProfile;\n        }\n        console.log(\"Creating new profile for user:\", user.id);\n        // W przeciwnym razie utwórz nowy profil\n        const newProfile = {\n            external_auth_id: user.id,\n            display_name: user.firstName ? `${user.firstName} ${user.lastName || \"\"}`.trim() : user.username || user.emailAddresses?.[0]?.emailAddress.split(\"@\")[0] || \"Nowy użytkownik\",\n            email: user.emailAddresses?.[0]?.emailAddress || \"\",\n            phone_number: user.phoneNumbers?.[0]?.phoneNumber || null,\n            profile_type: \"both\",\n            verification_level: \"basic\",\n            bio: \"\",\n            avatar_url: user.imageUrl || null,\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n        };\n        // Użyj supabaseAdmin, który ma uprawnienia service_role i pomija RLS\n        const { data: createdProfile, error: createError } = await _supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].from(\"user_profiles\").insert([\n            newProfile\n        ]).select().single();\n        if (createError) {\n            console.error(\"Error creating user profile with supabaseAdmin:\", createError);\n            return null;\n        }\n        console.log(\"Successfully created profile for user:\", user.id);\n        return createdProfile;\n    } catch (error) {\n        console.error(\"Error in getOrCreateUserProfile:\", error);\n        return null;\n    }\n}\n/**\r\n * Aktualizuje profil użytkownika\r\n */ async function updateUserProfile(userId, profileData) {\n    try {\n        if (!userId) {\n            throw new Error(\"User ID is required\");\n        }\n        const { data, error } = await _supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].from(\"user_profiles\").update(profileData).eq(\"id\", userId).select().single();\n        if (error) {\n            console.error(\"Error updating user profile:\", error);\n            throw error;\n        }\n        return data;\n    } catch (error) {\n        console.error(\"Exception in updateUserProfile:\", error);\n        throw error;\n    }\n}\n/**\r\n * Pobiera profil użytkownika używając uwierzytelnionego klienta\r\n */ async function getUserProfileWithAuth() {\n    try {\n        const user = await (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_2__.currentUser)();\n        if (!user) {\n            console.log(\"No authenticated user found\");\n            return null;\n        }\n        // Użyj uwierzytelnionego klienta Supabase\n        const supabaseAuth = (0,_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createServerSupabaseClient)();\n        const { data, error } = await supabaseAuth.from(\"user_profiles\").select(\"*\").eq(\"external_auth_id\", user.id).single();\n        if (error) {\n            console.error(\"Error fetching user profile with auth:\", error);\n            return null;\n        }\n        return data;\n    } catch (error) {\n        console.error(\"Exception in getUserProfileWithAuth:\", error);\n        return null;\n    }\n}\n/**\r\n * Sprawdza, czy użytkownik ma prawidłową sesję Clerk\r\n */ async function verifyUserSession() {\n    try {\n        const user = await (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_2__.currentUser)();\n        if (!user) {\n            return false;\n        }\n        // Sprawdź, czy możemy pobrać sesję i token\n        try {\n            const userSession = await user.getSession();\n            if (!userSession) {\n                return false;\n            }\n            const token = await userSession.getToken();\n            return !!token;\n        } catch (error) {\n            console.error(\"Error verifying user session:\", error);\n            return false;\n        }\n    } catch (error) {\n        console.error(\"Exception in verifyUserSession:\", error);\n        return false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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OUMsT0FBTyxNQUFNSixpRUFBV0E7UUFFOUIsSUFBSSxDQUFDSSxNQUFNO1lBQ1QsT0FBTztRQUNUO1FBRUEsMkNBQTJDO1FBQzNDLElBQUk7WUFDRixNQUFNK0MsY0FBYyxNQUFNL0MsS0FBS2dELFVBQVU7WUFDekMsSUFBSSxDQUFDRCxhQUFhO2dCQUNoQixPQUFPO1lBQ1Q7WUFFQSxNQUFNRSxRQUFRLE1BQU1GLFlBQVlHLFFBQVE7WUFDeEMsT0FBTyxDQUFDLENBQUNEO1FBQ1gsRUFBRSxPQUFPNUMsT0FBTztZQUNkSixRQUFRSSxLQUFLLENBQUMsaUNBQWlDQTtZQUMvQyxPQUFPO1FBQ1Q7SUFDRixFQUFFLE9BQU9BLE9BQU87UUFDZEosUUFBUUksS0FBSyxDQUFDLG1DQUFtQ0E7UUFDakQsT0FBTztJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncm91cHNoYXJlLXByb2plY3QvLi9zcmMvbGliL2F1dGgtc2VydmljZS5qcz9lOGVjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGN1cnJlbnRVc2VyIH0gZnJvbSAnQGNsZXJrL25leHRqcy9zZXJ2ZXInO1xyXG5pbXBvcnQgc3VwYWJhc2VBZG1pbiBmcm9tICcuL3N1cGFiYXNlLWFkbWluLWNsaWVudCc7XHJcbmltcG9ydCB7IGNyZWF0ZVNlcnZlclN1cGFiYXNlQ2xpZW50IH0gZnJvbSAnLi9zdXBhYmFzZS1zZXJ2ZXInO1xyXG5cclxuLyoqXHJcbiAqIFBvYmllcmEgYWt0dWFsbnkgcHJvZmlsIHXFvHl0a293bmlrYSB6IGJhenkgZGFueWNoXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXJQcm9maWxlKCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgY3VycmVudFVzZXIoKTtcclxuICAgIFxyXG4gICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdObyBhdXRoZW50aWNhdGVkIHVzZXIgZm91bmQnKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKCdHZXR0aW5nIHByb2ZpbGUgZm9yIHVzZXI6JywgdXNlci5pZCk7XHJcbiAgICBcclxuICAgIC8vIFXFvHl3YW15IHN1cGFiYXNlQWRtaW4sIGt0w7NyZSBtYSBwZcWCbmUgdXByYXduaWVuaWEgKHBvbWlqYSBSTFMpXHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgIC5mcm9tKCd1c2VyX3Byb2ZpbGVzJylcclxuICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgIC5lcSgnZXh0ZXJuYWxfYXV0aF9pZCcsIHVzZXIuaWQpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuICAgIFxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIC8vIElnbm9ydWplbXkgYsWCxIVkIFwibmllIHpuYWxlemlvbm9cIiAoUEdSU1QxMTYpXHJcbiAgICAgIGlmIChlcnJvci5jb2RlID09PSAnUEdSU1QxMTYnKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ05vIHByb2ZpbGUgZm91bmQgZm9yIHVzZXI6JywgdXNlci5pZCk7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXIgcHJvZmlsZTonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygnRm91bmQgcHJvZmlsZSBmb3IgdXNlcjonLCB1c2VyLmlkKTtcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFeGNlcHRpb24gaW4gZ2V0Q3VycmVudFVzZXJQcm9maWxlOicsIGVycm9yKTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFBvYmllcmEgcHJvZmlsIHXFvHl0a293bmlrYSBDbGVyayBpIHR3b3J6eSBnbyBqZcWbbGkgbmllIGlzdG5pZWplXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0T3JDcmVhdGVVc2VyUHJvZmlsZSgpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGN1cnJlbnRVc2VyKCk7XHJcbiAgICBcclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICBjb25zb2xlLmxvZygnTm8gYXV0aGVudGljYXRlZCB1c2VyIGZvdW5kJyk7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygnR2V0dGluZyBvciBjcmVhdGluZyBwcm9maWxlIGZvciB1c2VyOicsIHVzZXIuaWQpO1xyXG4gICAgXHJcbiAgICAvLyBQcsOzYmEgcG9icmFuaWEgaXN0bmllasSFY2VnbyBwcm9maWx1XHJcbiAgICBjb25zdCB1c2VyUHJvZmlsZSA9IGF3YWl0IGdldEN1cnJlbnRVc2VyUHJvZmlsZSgpO1xyXG4gICAgXHJcbiAgICAvLyBKZcWbbGkgcHJvZmlsIGlzdG5pZWplLCB6d3LDs8SHIGdvXHJcbiAgICBpZiAodXNlclByb2ZpbGUpIHtcclxuICAgICAgcmV0dXJuIHVzZXJQcm9maWxlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygnQ3JlYXRpbmcgbmV3IHByb2ZpbGUgZm9yIHVzZXI6JywgdXNlci5pZCk7XHJcbiAgICBcclxuICAgIC8vIFcgcHJ6ZWNpd255bSByYXppZSB1dHfDs3J6IG5vd3kgcHJvZmlsXHJcbiAgICBjb25zdCBuZXdQcm9maWxlID0ge1xyXG4gICAgICBleHRlcm5hbF9hdXRoX2lkOiB1c2VyLmlkLFxyXG4gICAgICBkaXNwbGF5X25hbWU6IHVzZXIuZmlyc3ROYW1lIFxyXG4gICAgICAgID8gYCR7dXNlci5maXJzdE5hbWV9ICR7dXNlci5sYXN0TmFtZSB8fCAnJ31gLnRyaW0oKSBcclxuICAgICAgICA6ICh1c2VyLnVzZXJuYW1lIHx8IHVzZXIuZW1haWxBZGRyZXNzZXM/LlswXT8uZW1haWxBZGRyZXNzLnNwbGl0KCdAJylbMF0gfHwgJ05vd3kgdcW8eXRrb3duaWsnKSxcclxuICAgICAgZW1haWw6IHVzZXIuZW1haWxBZGRyZXNzZXM/LlswXT8uZW1haWxBZGRyZXNzIHx8ICcnLFxyXG4gICAgICBwaG9uZV9udW1iZXI6IHVzZXIucGhvbmVOdW1iZXJzPy5bMF0/LnBob25lTnVtYmVyIHx8IG51bGwsXHJcbiAgICAgIHByb2ZpbGVfdHlwZTogJ2JvdGgnLFxyXG4gICAgICB2ZXJpZmljYXRpb25fbGV2ZWw6ICdiYXNpYycsXHJcbiAgICAgIGJpbzogJycsXHJcbiAgICAgIGF2YXRhcl91cmw6IHVzZXIuaW1hZ2VVcmwgfHwgbnVsbCxcclxuICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgIH07XHJcbiAgICBcclxuICAgIC8vIFXFvHlqIHN1cGFiYXNlQWRtaW4sIGt0w7NyeSBtYSB1cHJhd25pZW5pYSBzZXJ2aWNlX3JvbGUgaSBwb21pamEgUkxTXHJcbiAgICBjb25zdCB7IGRhdGE6IGNyZWF0ZWRQcm9maWxlLCBlcnJvcjogY3JlYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgLmZyb20oJ3VzZXJfcHJvZmlsZXMnKVxyXG4gICAgICAuaW5zZXJ0KFtuZXdQcm9maWxlXSlcclxuICAgICAgLnNlbGVjdCgpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuICAgIFxyXG4gICAgaWYgKGNyZWF0ZUVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHVzZXIgcHJvZmlsZSB3aXRoIHN1cGFiYXNlQWRtaW46JywgY3JlYXRlRXJyb3IpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coJ1N1Y2Nlc3NmdWxseSBjcmVhdGVkIHByb2ZpbGUgZm9yIHVzZXI6JywgdXNlci5pZCk7XHJcbiAgICByZXR1cm4gY3JlYXRlZFByb2ZpbGU7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdldE9yQ3JlYXRlVXNlclByb2ZpbGU6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQWt0dWFsaXp1amUgcHJvZmlsIHXFvHl0a293bmlrYVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVVzZXJQcm9maWxlKHVzZXJJZCwgcHJvZmlsZURhdGEpIHtcclxuICB0cnkge1xyXG4gICAgaWYgKCF1c2VySWQpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIElEIGlzIHJlcXVpcmVkJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgLmZyb20oJ3VzZXJfcHJvZmlsZXMnKVxyXG4gICAgICAudXBkYXRlKHByb2ZpbGVEYXRhKVxyXG4gICAgICAuZXEoJ2lkJywgdXNlcklkKVxyXG4gICAgICAuc2VsZWN0KClcclxuICAgICAgLnNpbmdsZSgpO1xyXG4gICAgXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgdXNlciBwcm9maWxlOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFeGNlcHRpb24gaW4gdXBkYXRlVXNlclByb2ZpbGU6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogUG9iaWVyYSBwcm9maWwgdcW8eXRrb3duaWthIHXFvHl3YWrEhWMgdXdpZXJ6eXRlbG5pb25lZ28ga2xpZW50YVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJQcm9maWxlV2l0aEF1dGgoKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBjdXJyZW50VXNlcigpO1xyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgY29uc29sZS5sb2coJ05vIGF1dGhlbnRpY2F0ZWQgdXNlciBmb3VuZCcpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gVcW8eWogdXdpZXJ6eXRlbG5pb25lZ28ga2xpZW50YSBTdXBhYmFzZVxyXG4gICAgY29uc3Qgc3VwYWJhc2VBdXRoID0gY3JlYXRlU2VydmVyU3VwYWJhc2VDbGllbnQoKTtcclxuICAgIFxyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBdXRoXHJcbiAgICAgIC5mcm9tKCd1c2VyX3Byb2ZpbGVzJylcclxuICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgIC5lcSgnZXh0ZXJuYWxfYXV0aF9pZCcsIHVzZXIuaWQpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuICAgIFxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXIgcHJvZmlsZSB3aXRoIGF1dGg6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0V4Y2VwdGlvbiBpbiBnZXRVc2VyUHJvZmlsZVdpdGhBdXRoOicsIGVycm9yKTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFNwcmF3ZHphLCBjenkgdcW8eXRrb3duaWsgbWEgcHJhd2lkxYJvd8SFIHNlc2rEmSBDbGVya1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZlcmlmeVVzZXJTZXNzaW9uKCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgY3VycmVudFVzZXIoKTtcclxuICAgIFxyXG4gICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gU3ByYXdkxbosIGN6eSBtb8W8ZW15IHBvYnJhxIcgc2VzasSZIGkgdG9rZW5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHVzZXJTZXNzaW9uID0gYXdhaXQgdXNlci5nZXRTZXNzaW9uKCk7XHJcbiAgICAgIGlmICghdXNlclNlc3Npb24pIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHRva2VuID0gYXdhaXQgdXNlclNlc3Npb24uZ2V0VG9rZW4oKTtcclxuICAgICAgcmV0dXJuICEhdG9rZW47XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB2ZXJpZnlpbmcgdXNlciBzZXNzaW9uOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFeGNlcHRpb24gaW4gdmVyaWZ5VXNlclNlc3Npb246JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJjdXJyZW50VXNlciIsInN1cGFiYXNlQWRtaW4iLCJjcmVhdGVTZXJ2ZXJTdXBhYmFzZUNsaWVudCIsImdldEN1cnJlbnRVc2VyUHJvZmlsZSIsInVzZXIiLCJjb25zb2xlIiwibG9nIiwiaWQiLCJkYXRhIiwiZXJyb3IiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJzaW5nbGUiLCJjb2RlIiwiZ2V0T3JDcmVhdGVVc2VyUHJvZmlsZSIsInVzZXJQcm9maWxlIiwibmV3UHJvZmlsZSIsImV4dGVybmFsX2F1dGhfaWQiLCJkaXNwbGF5X25hbWUiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInRyaW0iLCJ1c2VybmFtZSIsImVtYWlsQWRkcmVzc2VzIiwiZW1haWxBZGRyZXNzIiwic3BsaXQiLCJlbWFpbCIsInBob25lX251bWJlciIsInBob25lTnVtYmVycyIsInBob25lTnVtYmVyIiwicHJvZmlsZV90eXBlIiwidmVyaWZpY2F0aW9uX2xldmVsIiwiYmlvIiwiYXZhdGFyX3VybCIsImltYWdlVXJsIiwiY3JlYXRlZF9hdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInVwZGF0ZWRfYXQiLCJjcmVhdGVkUHJvZmlsZSIsImNyZWF0ZUVycm9yIiwiaW5zZXJ0IiwidXBkYXRlVXNlclByb2ZpbGUiLCJ1c2VySWQiLCJwcm9maWxlRGF0YSIsIkVycm9yIiwidXBkYXRlIiwiZ2V0VXNlclByb2ZpbGVXaXRoQXV0aCIsInN1cGFiYXNlQXV0aCIsInZlcmlmeVVzZXJTZXNzaW9uIiwidXNlclNlc3Npb24iLCJnZXRTZXNzaW9uIiwidG9rZW4iLCJnZXRUb2tlbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth-service.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/clerk-supabase.js":
/*!***********************************!*\
  !*** ./src/lib/clerk-supabase.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createClerkSupabaseClient: () => (/* binding */ createClerkSupabaseClient),\n/* harmony export */   getAuthenticatedSupabaseClient: () => (/* binding */ getAuthenticatedSupabaseClient)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://twiarwghktzljergqfsm.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3aWFyd2doa3R6bGplcmdxZnNtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQwMzUxNzUsImV4cCI6MjA1OTYxMTE3NX0.EOGGJVUQeeAG__KyJA_xkIGUjWhTReGEDWa9JV6LZz8\";\nif (!supabaseUrl || !supabaseAnonKey) {\n    console.error(\"Missing Supabase environment variables\");\n}\n/**\r\n * Tworzy klienta Supabase z uwierzytelnianiem Clerk\r\n * używając nowej integracji Clerk-Supabase\r\n * @param {Object} user - Obiekt użytkownika Clerk\r\n * @returns {Promise<Object>} Klient Supabase z uwierzytelnianiem\r\n */ async function getAuthenticatedSupabaseClient(user) {\n    if (!user) return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n    try {\n        // Pobierz sesję użytkownika\n        const userSession = await user.getSession();\n        if (!userSession) {\n            console.warn(\"No active Clerk session found\");\n            return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n        }\n        // Utwórz klienta używając nowej metody integracji\n        return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey, {\n            auth: {\n                persistSession: false,\n                autoRefreshToken: false\n            },\n            // To jest kluczowa zmiana - użycie funkcji accessToken\n            async accessToken () {\n                try {\n                    // Pobierz token bez parametru template\n                    return await userSession.getToken();\n                } catch (error) {\n                    console.warn(\"Failed to get token from session:\", error);\n                    return null;\n                }\n            }\n        });\n    } catch (error) {\n        console.error(\"Error creating authenticated Supabase client:\", error);\n        return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n    }\n}\n/**\r\n * Tworzy klienta Supabase z sesją Clerk\r\n * zgodnie z nową integracją\r\n * @param {Object} session - Sesja Clerk\r\n * @returns {Object} Klient Supabase z uwierzytelnianiem\r\n */ function createClerkSupabaseClient(session) {\n    if (!session) {\n        return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n    }\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey, {\n        async accessToken () {\n            try {\n                // Używamy getToken bez parametru template\n                return await session.getToken();\n            } catch (error) {\n                console.warn(\"Failed to get token from session:\", error);\n                return null;\n            }\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2NsZXJrLXN1cGFiYXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFxRDtBQUVyRCxNQUFNQyxjQUFjQywwQ0FBb0M7QUFDeEQsTUFBTUcsa0JBQWtCSCxrTkFBeUM7QUFFakUsSUFBSSxDQUFDRCxlQUFlLENBQUNJLGlCQUFpQjtJQUNwQ0UsUUFBUUMsS0FBSyxDQUFDO0FBQ2hCO0FBRUE7Ozs7O0NBS0MsR0FDTSxlQUFlQywrQkFBK0JDLElBQUk7SUFDdkQsSUFBSSxDQUFDQSxNQUFNLE9BQU9WLG1FQUFZQSxDQUFDQyxhQUFhSTtJQUU1QyxJQUFJO1FBQ0YsNEJBQTRCO1FBQzVCLE1BQU1NLGNBQWMsTUFBTUQsS0FBS0UsVUFBVTtRQUV6QyxJQUFJLENBQUNELGFBQWE7WUFDaEJKLFFBQVFNLElBQUksQ0FBQztZQUNiLE9BQU9iLG1FQUFZQSxDQUFDQyxhQUFhSTtRQUNuQztRQUVBLGtEQUFrRDtRQUNsRCxPQUFPTCxtRUFBWUEsQ0FDakJDLGFBQ0FJLGlCQUNBO1lBQ0VTLE1BQU07Z0JBQ0pDLGdCQUFnQjtnQkFDaEJDLGtCQUFrQjtZQUNwQjtZQUNBLHVEQUF1RDtZQUN2RCxNQUFNQztnQkFDSixJQUFJO29CQUNGLHVDQUF1QztvQkFDdkMsT0FBTyxNQUFNTixZQUFZTyxRQUFRO2dCQUNuQyxFQUFFLE9BQU9WLE9BQU87b0JBQ2RELFFBQVFNLElBQUksQ0FBQyxxQ0FBcUNMO29CQUNsRCxPQUFPO2dCQUNUO1lBQ0Y7UUFDRjtJQUVKLEVBQUUsT0FBT0EsT0FBTztRQUNkRCxRQUFRQyxLQUFLLENBQUMsaURBQWlEQTtRQUMvRCxPQUFPUixtRUFBWUEsQ0FBQ0MsYUFBYUk7SUFDbkM7QUFDRjtBQUVBOzs7OztDQUtDLEdBQ00sU0FBU2MsMEJBQTBCQyxPQUFPO0lBQy9DLElBQUksQ0FBQ0EsU0FBUztRQUNaLE9BQU9wQixtRUFBWUEsQ0FBQ0MsYUFBYUk7SUFDbkM7SUFFQSxPQUFPTCxtRUFBWUEsQ0FDakJDLGFBQ0FJLGlCQUNBO1FBQ0UsTUFBTVk7WUFDSixJQUFJO2dCQUNGLDBDQUEwQztnQkFDMUMsT0FBTyxNQUFNRyxRQUFRRixRQUFRO1lBQy9CLEVBQUUsT0FBT1YsT0FBTztnQkFDZEQsUUFBUU0sSUFBSSxDQUFDLHFDQUFxQ0w7Z0JBQ2xELE9BQU87WUFDVDtRQUNGO0lBQ0Y7QUFFSiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyb3Vwc2hhcmUtcHJvamVjdC8uL3NyYy9saWIvY2xlcmstc3VwYWJhc2UuanM/OGEzMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xyXG5cclxuY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkw7XHJcbmNvbnN0IHN1cGFiYXNlQW5vbktleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZO1xyXG5cclxuaWYgKCFzdXBhYmFzZVVybCB8fCAhc3VwYWJhc2VBbm9uS2V5KSB7XHJcbiAgY29uc29sZS5lcnJvcignTWlzc2luZyBTdXBhYmFzZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMnKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFR3b3J6eSBrbGllbnRhIFN1cGFiYXNlIHogdXdpZXJ6eXRlbG5pYW5pZW0gQ2xlcmtcclxuICogdcW8eXdhasSFYyBub3dlaiBpbnRlZ3JhY2ppIENsZXJrLVN1cGFiYXNlXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSB1c2VyIC0gT2JpZWt0IHXFvHl0a293bmlrYSBDbGVya1xyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSBLbGllbnQgU3VwYWJhc2UgeiB1d2llcnp5dGVsbmlhbmllbVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEF1dGhlbnRpY2F0ZWRTdXBhYmFzZUNsaWVudCh1c2VyKSB7XHJcbiAgaWYgKCF1c2VyKSByZXR1cm4gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUFub25LZXkpO1xyXG4gIFxyXG4gIHRyeSB7XHJcbiAgICAvLyBQb2JpZXJ6IHNlc2rEmSB1xbx5dGtvd25pa2FcclxuICAgIGNvbnN0IHVzZXJTZXNzaW9uID0gYXdhaXQgdXNlci5nZXRTZXNzaW9uKCk7XHJcbiAgICBcclxuICAgIGlmICghdXNlclNlc3Npb24pIHtcclxuICAgICAgY29uc29sZS53YXJuKCdObyBhY3RpdmUgQ2xlcmsgc2Vzc2lvbiBmb3VuZCcpO1xyXG4gICAgICByZXR1cm4gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUFub25LZXkpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBVdHfDs3J6IGtsaWVudGEgdcW8eXdhasSFYyBub3dlaiBtZXRvZHkgaW50ZWdyYWNqaVxyXG4gICAgcmV0dXJuIGNyZWF0ZUNsaWVudChcclxuICAgICAgc3VwYWJhc2VVcmwsXHJcbiAgICAgIHN1cGFiYXNlQW5vbktleSxcclxuICAgICAge1xyXG4gICAgICAgIGF1dGg6IHtcclxuICAgICAgICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZSxcclxuICAgICAgICAgIGF1dG9SZWZyZXNoVG9rZW46IGZhbHNlXHJcbiAgICAgICAgfSxcclxuICAgICAgICAvLyBUbyBqZXN0IGtsdWN6b3dhIHptaWFuYSAtIHXFvHljaWUgZnVua2NqaSBhY2Nlc3NUb2tlblxyXG4gICAgICAgIGFzeW5jIGFjY2Vzc1Rva2VuKCkge1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gUG9iaWVyeiB0b2tlbiBiZXogcGFyYW1ldHJ1IHRlbXBsYXRlXHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB1c2VyU2Vzc2lvbi5nZXRUb2tlbigpO1xyXG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gZ2V0IHRva2VuIGZyb20gc2Vzc2lvbjonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgYXV0aGVudGljYXRlZCBTdXBhYmFzZSBjbGllbnQ6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUd29yenkga2xpZW50YSBTdXBhYmFzZSB6IHNlc2rEhSBDbGVya1xyXG4gKiB6Z29kbmllIHogbm93xIUgaW50ZWdyYWNqxIVcclxuICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb24gLSBTZXNqYSBDbGVya1xyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBLbGllbnQgU3VwYWJhc2UgeiB1d2llcnp5dGVsbmlhbmllbVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNsZXJrU3VwYWJhc2VDbGllbnQoc2Vzc2lvbikge1xyXG4gIGlmICghc2Vzc2lvbikge1xyXG4gICAgcmV0dXJuIGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KTtcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIGNyZWF0ZUNsaWVudChcclxuICAgIHN1cGFiYXNlVXJsLFxyXG4gICAgc3VwYWJhc2VBbm9uS2V5LFxyXG4gICAge1xyXG4gICAgICBhc3luYyBhY2Nlc3NUb2tlbigpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgLy8gVcW8eXdhbXkgZ2V0VG9rZW4gYmV6IHBhcmFtZXRydSB0ZW1wbGF0ZVxyXG4gICAgICAgICAgcmV0dXJuIGF3YWl0IHNlc3Npb24uZ2V0VG9rZW4oKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gZ2V0IHRva2VuIGZyb20gc2Vzc2lvbjonLCBlcnJvcik7XHJcbiAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICApO1xyXG59Il0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiY29uc29sZSIsImVycm9yIiwiZ2V0QXV0aGVudGljYXRlZFN1cGFiYXNlQ2xpZW50IiwidXNlciIsInVzZXJTZXNzaW9uIiwiZ2V0U2Vzc2lvbiIsIndhcm4iLCJhdXRoIiwicGVyc2lzdFNlc3Npb24iLCJhdXRvUmVmcmVzaFRva2VuIiwiYWNjZXNzVG9rZW4iLCJnZXRUb2tlbiIsImNyZWF0ZUNsZXJrU3VwYWJhc2VDbGllbnQiLCJzZXNzaW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/clerk-supabase.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase-admin-client.js":
/*!******************************************!*\
  !*** ./src/lib/supabase-admin-client.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://twiarwghktzljergqfsm.supabase.co\";\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_KEY || process.env.SUPABASE_SERVICE_ROLE_KEY;\nif (!supabaseUrl || !supabaseServiceKey) {\n    console.error(\"Missing environment variables: NEXT_PUBLIC_SUPABASE_URL or SUPABASE_SERVICE_KEY/SUPABASE_SERVICE_ROLE_KEY\");\n}\n// Klient z uprawnieniami administratora, używany TYLKO na serwerze\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    },\n    // Ustaw globalny header do omijania RLS\n    global: {\n        headers: {\n            \"x-supabase-bypass-rls\": \"true\"\n        }\n    }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (supabaseAdmin);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3N1cGFiYXNlLWFkbWluLWNsaWVudC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFxRDtBQUVyRCxNQUFNQyxjQUFjQywwQ0FBb0M7QUFDeEQsTUFBTUcscUJBQXFCSCxRQUFRQyxHQUFHLENBQUNHLG9CQUFvQixJQUFJSixRQUFRQyxHQUFHLENBQUNJLHlCQUF5QjtBQUVwRyxJQUFJLENBQUNOLGVBQWUsQ0FBQ0ksb0JBQW9CO0lBQ3ZDRyxRQUFRQyxLQUFLLENBQ1g7QUFFSjtBQUVBLG1FQUFtRTtBQUNuRSxNQUFNQyxnQkFBZ0JWLG1FQUFZQSxDQUFDQyxhQUFhSSxvQkFBb0I7SUFDbEVNLE1BQU07UUFDSkMsa0JBQWtCO1FBQ2xCQyxnQkFBZ0I7SUFDbEI7SUFDQSx3Q0FBd0M7SUFDeENDLFFBQVE7UUFDTkMsU0FBUztZQUNQLHlCQUF5QjtRQUMzQjtJQUNGO0FBQ0Y7QUFFQSxpRUFBZUwsYUFBYUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2dyb3Vwc2hhcmUtcHJvamVjdC8uL3NyYy9saWIvc3VwYWJhc2UtYWRtaW4tY2xpZW50LmpzPzlhZDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcclxuXHJcbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMO1xyXG5jb25zdCBzdXBhYmFzZVNlcnZpY2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX0tFWSB8fCBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZO1xyXG5cclxuaWYgKCFzdXBhYmFzZVVybCB8fCAhc3VwYWJhc2VTZXJ2aWNlS2V5KSB7XHJcbiAgY29uc29sZS5lcnJvcihcclxuICAgICdNaXNzaW5nIGVudmlyb25tZW50IHZhcmlhYmxlczogTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIG9yIFNVUEFCQVNFX1NFUlZJQ0VfS0VZL1NVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVknXHJcbiAgKTtcclxufVxyXG5cclxuLy8gS2xpZW50IHogdXByYXduaWVuaWFtaSBhZG1pbmlzdHJhdG9yYSwgdcW8eXdhbnkgVFlMS08gbmEgc2Vyd2VyemVcclxuY29uc3Qgc3VwYWJhc2VBZG1pbiA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VTZXJ2aWNlS2V5LCB7XHJcbiAgYXV0aDoge1xyXG4gICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXHJcbiAgICBwZXJzaXN0U2Vzc2lvbjogZmFsc2VcclxuICB9LFxyXG4gIC8vIFVzdGF3IGdsb2JhbG55IGhlYWRlciBkbyBvbWlqYW5pYSBSTFNcclxuICBnbG9iYWw6IHtcclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgJ3gtc3VwYWJhc2UtYnlwYXNzLXJscyc6ICd0cnVlJ1xyXG4gICAgfVxyXG4gIH1cclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBzdXBhYmFzZUFkbWluOyJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZVNlcnZpY2VLZXkiLCJTVVBBQkFTRV9TRVJWSUNFX0tFWSIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJjb25zb2xlIiwiZXJyb3IiLCJzdXBhYmFzZUFkbWluIiwiYXV0aCIsImF1dG9SZWZyZXNoVG9rZW4iLCJwZXJzaXN0U2Vzc2lvbiIsImdsb2JhbCIsImhlYWRlcnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase-admin-client.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase-client.js":
/*!************************************!*\
  !*** ./src/lib/supabase-client.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSupabaseClient: () => (/* binding */ createSupabaseClient),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getSubscriptionOffers: () => (/* binding */ getSubscriptionOffers),\n/* harmony export */   handleSupabaseError: () => (/* binding */ handleSupabaseError)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n/* harmony import */ var _clerk_supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./clerk-supabase */ \"(rsc)/./src/lib/clerk-supabase.js\");\n\n\n// Initialize the Supabase client\nconst supabaseUrl = \"https://twiarwghktzljergqfsm.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3aWFyd2doa3R6bGplcmdxZnNtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQwMzUxNzUsImV4cCI6MjA1OTYxMTE3NX0.EOGGJVUQeeAG__KyJA_xkIGUjWhTReGEDWa9JV6LZz8\";\n// Check if environment variables are set\nif (!supabaseUrl || !supabaseAnonKey) {\n    console.error(\"Missing environment variables: NEXT_PUBLIC_SUPABASE_URL or NEXT_PUBLIC_SUPABASE_ANON_KEY\");\n}\n// Create a single instance of the Supabase client to reuse across the app\n// This client is for unauthenticated operations only\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__.createClient)(supabaseUrl, supabaseAnonKey);\n/**\r\n * Tworzy klienta Supabase z sesją Clerk (nowa integracja)\r\n * @param {Object} session - Sesja Clerk\r\n * @returns {Object} Klient Supabase z uwierzytelnianiem\r\n */ const createSupabaseClient = (session)=>{\n    if (!session) {\n        return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__.createClient)(supabaseUrl, supabaseAnonKey);\n    }\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__.createClient)(supabaseUrl, supabaseAnonKey, {\n        async accessToken () {\n            // Zgodnie z nową integracją, bez parametru template\n            return session?.getToken() ?? null;\n        }\n    });\n};\n/**\r\n * Pobiera oferty subskrypcji z możliwością filtrowania\r\n * @param {Object} filters - Filtry do zapytania\r\n * @param {Object} authUser - Uwierzytelniony użytkownik Clerk (opcjonalnie)\r\n * @returns {Promise<Array>} - Lista ofert subskrypcji\r\n */ async function getSubscriptionOffers(filters = {}, authUser = null) {\n    try {\n        // Wybierz odpowiedni klient Supabase (uwierzytelniony lub anonimowy)\n        let client = supabase;\n        if (authUser) {\n            client = await (0,_clerk_supabase__WEBPACK_IMPORTED_MODULE_0__.getAuthenticatedSupabaseClient)(authUser);\n        }\n        // Przygotowanie zapytania\n        let query = client.from(\"group_subs\").select(`\r\n        *,\r\n        subscription_platforms(*),\r\n        groups(id, name, description),\r\n        owner:groups!inner(owner_id, user_profiles!inner(id, display_name, avatar_url, rating_avg, rating_count, verification_level))\r\n      `).eq(\"status\", \"active\");\n        // Dodaj filtr na platformę\n        if (filters.platformId) {\n            query = query.eq(\"platform_id\", filters.platformId);\n        }\n        // Dodaj filtr na cenę minimalną\n        if (filters.minPrice !== undefined && !isNaN(filters.minPrice)) {\n            query = query.gte(\"price_per_slot\", filters.minPrice);\n        }\n        // Dodaj filtr na cenę maksymalną\n        if (filters.maxPrice !== undefined && !isNaN(filters.maxPrice)) {\n            query = query.lte(\"price_per_slot\", filters.maxPrice);\n        }\n        // Filtruj oferty tylko z dostępnymi miejscami\n        if (filters.availableSlots !== false) {\n            query = query.gt(\"slots_available\", 0);\n        }\n        // Sortowanie\n        const orderBy = filters.orderBy || \"created_at\";\n        const ascending = filters.ascending || false;\n        query = query.order(orderBy, {\n            ascending\n        });\n        // Limit i paginacja\n        if (filters.limit) {\n            query = query.limit(filters.limit);\n        }\n        if (filters.offset) {\n            query = query.offset(filters.offset);\n        }\n        // Wykonaj zapytanie\n        const { data, error } = await query;\n        if (error) {\n            console.error(\"Error fetching subscription offers:\", error);\n            throw error;\n        }\n        return data || [];\n    } catch (error) {\n        console.error(\"Error in getSubscriptionOffers:\", error);\n        throw error;\n    }\n}\n// Helper function to handle Supabase errors consistently\nconst handleSupabaseError = (error)=>{\n    console.error(\"Supabase error:\", error);\n    // Return a standardized error object\n    return {\n        error: true,\n        message: error.message || \"An unexpected error occurred\",\n        code: error.code || \"unknown_error\",\n        details: error.details || null\n    };\n};\n// Export the default Supabase client (without auth)\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (supabase);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ckMsT0FBTztRQUNMQSxPQUFPO1FBQ1A4QixTQUFTOUIsTUFBTThCLE9BQU8sSUFBSTtRQUMxQkMsTUFBTS9CLE1BQU0rQixJQUFJLElBQUk7UUFDcEJDLFNBQVNoQyxNQUFNZ0MsT0FBTyxJQUFJO0lBQzVCO0FBQ0YsRUFBRTtBQUVGLG9EQUFvRDtBQUNwRCxpRUFBZS9CLFFBQVFBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncm91cHNoYXJlLXByb2plY3QvLi9zcmMvbGliL3N1cGFiYXNlLWNsaWVudC5qcz82YjI5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XHJcbmltcG9ydCB7IGdldEF1dGhlbnRpY2F0ZWRTdXBhYmFzZUNsaWVudCB9IGZyb20gJy4vY2xlcmstc3VwYWJhc2UnO1xyXG5cclxuLy8gSW5pdGlhbGl6ZSB0aGUgU3VwYWJhc2UgY2xpZW50XHJcbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMO1xyXG5jb25zdCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWTtcclxuXHJcbi8vIENoZWNrIGlmIGVudmlyb25tZW50IHZhcmlhYmxlcyBhcmUgc2V0XHJcbmlmICghc3VwYWJhc2VVcmwgfHwgIXN1cGFiYXNlQW5vbktleSkge1xyXG4gIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAnTWlzc2luZyBlbnZpcm9ubWVudCB2YXJpYWJsZXM6IE5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCBvciBORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSdcclxuICApO1xyXG59XHJcblxyXG4vLyBDcmVhdGUgYSBzaW5nbGUgaW5zdGFuY2Ugb2YgdGhlIFN1cGFiYXNlIGNsaWVudCB0byByZXVzZSBhY3Jvc3MgdGhlIGFwcFxyXG4vLyBUaGlzIGNsaWVudCBpcyBmb3IgdW5hdXRoZW50aWNhdGVkIG9wZXJhdGlvbnMgb25seVxyXG5jb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KTtcclxuXHJcbi8qKlxyXG4gKiBUd29yenkga2xpZW50YSBTdXBhYmFzZSB6IHNlc2rEhSBDbGVyayAobm93YSBpbnRlZ3JhY2phKVxyXG4gKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbiAtIFNlc2phIENsZXJrXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IEtsaWVudCBTdXBhYmFzZSB6IHV3aWVyenl0ZWxuaWFuaWVtXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgY3JlYXRlU3VwYWJhc2VDbGllbnQgPSAoc2Vzc2lvbikgPT4ge1xyXG4gIGlmICghc2Vzc2lvbikge1xyXG4gICAgcmV0dXJuIGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KTtcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIGNyZWF0ZUNsaWVudChcclxuICAgIHN1cGFiYXNlVXJsLFxyXG4gICAgc3VwYWJhc2VBbm9uS2V5LFxyXG4gICAge1xyXG4gICAgICBhc3luYyBhY2Nlc3NUb2tlbigpIHtcclxuICAgICAgICAvLyBaZ29kbmllIHogbm93xIUgaW50ZWdyYWNqxIUsIGJleiBwYXJhbWV0cnUgdGVtcGxhdGVcclxuICAgICAgICByZXR1cm4gc2Vzc2lvbj8uZ2V0VG9rZW4oKSA/PyBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBQb2JpZXJhIG9mZXJ0eSBzdWJza3J5cGNqaSB6IG1vxbxsaXdvxZtjacSFIGZpbHRyb3dhbmlhXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBmaWx0ZXJzIC0gRmlsdHJ5IGRvIHphcHl0YW5pYVxyXG4gKiBAcGFyYW0ge09iamVjdH0gYXV0aFVzZXIgLSBVd2llcnp5dGVsbmlvbnkgdcW8eXRrb3duaWsgQ2xlcmsgKG9wY2pvbmFsbmllKVxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxBcnJheT59IC0gTGlzdGEgb2ZlcnQgc3Vic2tyeXBjamlcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTdWJzY3JpcHRpb25PZmZlcnMoZmlsdGVycyA9IHt9LCBhdXRoVXNlciA9IG51bGwpIHtcclxuICB0cnkge1xyXG4gICAgLy8gV3liaWVyeiBvZHBvd2llZG5pIGtsaWVudCBTdXBhYmFzZSAodXdpZXJ6eXRlbG5pb255IGx1YiBhbm9uaW1vd3kpXHJcbiAgICBsZXQgY2xpZW50ID0gc3VwYWJhc2U7XHJcbiAgICBcclxuICAgIGlmIChhdXRoVXNlcikge1xyXG4gICAgICBjbGllbnQgPSBhd2FpdCBnZXRBdXRoZW50aWNhdGVkU3VwYWJhc2VDbGllbnQoYXV0aFVzZXIpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBQcnp5Z290b3dhbmllIHphcHl0YW5pYVxyXG4gICAgbGV0IHF1ZXJ5ID0gY2xpZW50XHJcbiAgICAgIC5mcm9tKCdncm91cF9zdWJzJylcclxuICAgICAgLnNlbGVjdChgXHJcbiAgICAgICAgKixcclxuICAgICAgICBzdWJzY3JpcHRpb25fcGxhdGZvcm1zKCopLFxyXG4gICAgICAgIGdyb3VwcyhpZCwgbmFtZSwgZGVzY3JpcHRpb24pLFxyXG4gICAgICAgIG93bmVyOmdyb3VwcyFpbm5lcihvd25lcl9pZCwgdXNlcl9wcm9maWxlcyFpbm5lcihpZCwgZGlzcGxheV9uYW1lLCBhdmF0YXJfdXJsLCByYXRpbmdfYXZnLCByYXRpbmdfY291bnQsIHZlcmlmaWNhdGlvbl9sZXZlbCkpXHJcbiAgICAgIGApXHJcbiAgICAgIC5lcSgnc3RhdHVzJywgJ2FjdGl2ZScpO1xyXG4gICAgXHJcbiAgICAvLyBEb2RhaiBmaWx0ciBuYSBwbGF0Zm9ybcSZXHJcbiAgICBpZiAoZmlsdGVycy5wbGF0Zm9ybUlkKSB7XHJcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ3BsYXRmb3JtX2lkJywgZmlsdGVycy5wbGF0Zm9ybUlkKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gRG9kYWogZmlsdHIgbmEgY2VuxJkgbWluaW1hbG7EhVxyXG4gICAgaWYgKGZpbHRlcnMubWluUHJpY2UgIT09IHVuZGVmaW5lZCAmJiAhaXNOYU4oZmlsdGVycy5taW5QcmljZSkpIHtcclxuICAgICAgcXVlcnkgPSBxdWVyeS5ndGUoJ3ByaWNlX3Blcl9zbG90JywgZmlsdGVycy5taW5QcmljZSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIERvZGFqIGZpbHRyIG5hIGNlbsSZIG1ha3N5bWFsbsSFXHJcbiAgICBpZiAoZmlsdGVycy5tYXhQcmljZSAhPT0gdW5kZWZpbmVkICYmICFpc05hTihmaWx0ZXJzLm1heFByaWNlKSkge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5Lmx0ZSgncHJpY2VfcGVyX3Nsb3QnLCBmaWx0ZXJzLm1heFByaWNlKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gRmlsdHJ1aiBvZmVydHkgdHlsa28geiBkb3N0xJlwbnltaSBtaWVqc2NhbWlcclxuICAgIGlmIChmaWx0ZXJzLmF2YWlsYWJsZVNsb3RzICE9PSBmYWxzZSkge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5Lmd0KCdzbG90c19hdmFpbGFibGUnLCAwKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gU29ydG93YW5pZVxyXG4gICAgY29uc3Qgb3JkZXJCeSA9IGZpbHRlcnMub3JkZXJCeSB8fCAnY3JlYXRlZF9hdCc7XHJcbiAgICBjb25zdCBhc2NlbmRpbmcgPSBmaWx0ZXJzLmFzY2VuZGluZyB8fCBmYWxzZTtcclxuICAgIHF1ZXJ5ID0gcXVlcnkub3JkZXIob3JkZXJCeSwgeyBhc2NlbmRpbmcgfSk7XHJcbiAgICBcclxuICAgIC8vIExpbWl0IGkgcGFnaW5hY2phXHJcbiAgICBpZiAoZmlsdGVycy5saW1pdCkge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5LmxpbWl0KGZpbHRlcnMubGltaXQpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoZmlsdGVycy5vZmZzZXQpIHtcclxuICAgICAgcXVlcnkgPSBxdWVyeS5vZmZzZXQoZmlsdGVycy5vZmZzZXQpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBXeWtvbmFqIHphcHl0YW5pZVxyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgcXVlcnk7XHJcbiAgICBcclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBzdWJzY3JpcHRpb24gb2ZmZXJzOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBkYXRhIHx8IFtdO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBnZXRTdWJzY3JpcHRpb25PZmZlcnM6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gaGFuZGxlIFN1cGFiYXNlIGVycm9ycyBjb25zaXN0ZW50bHlcclxuZXhwb3J0IGNvbnN0IGhhbmRsZVN1cGFiYXNlRXJyb3IgPSAoZXJyb3IpID0+IHtcclxuICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBlcnJvcjonLCBlcnJvcik7XHJcbiAgXHJcbiAgLy8gUmV0dXJuIGEgc3RhbmRhcmRpemVkIGVycm9yIG9iamVjdFxyXG4gIHJldHVybiB7XHJcbiAgICBlcnJvcjogdHJ1ZSxcclxuICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfHwgJ0FuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQnLFxyXG4gICAgY29kZTogZXJyb3IuY29kZSB8fCAndW5rbm93bl9lcnJvcicsXHJcbiAgICBkZXRhaWxzOiBlcnJvci5kZXRhaWxzIHx8IG51bGwsXHJcbiAgfTtcclxufTtcclxuXHJcbi8vIEV4cG9ydCB0aGUgZGVmYXVsdCBTdXBhYmFzZSBjbGllbnQgKHdpdGhvdXQgYXV0aClcclxuZXhwb3J0IGRlZmF1bHQgc3VwYWJhc2U7Il0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsImdldEF1dGhlbnRpY2F0ZWRTdXBhYmFzZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiY29uc29sZSIsImVycm9yIiwic3VwYWJhc2UiLCJjcmVhdGVTdXBhYmFzZUNsaWVudCIsInNlc3Npb24iLCJhY2Nlc3NUb2tlbiIsImdldFRva2VuIiwiZ2V0U3Vic2NyaXB0aW9uT2ZmZXJzIiwiZmlsdGVycyIsImF1dGhVc2VyIiwiY2xpZW50IiwicXVlcnkiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJwbGF0Zm9ybUlkIiwibWluUHJpY2UiLCJ1bmRlZmluZWQiLCJpc05hTiIsImd0ZSIsIm1heFByaWNlIiwibHRlIiwiYXZhaWxhYmxlU2xvdHMiLCJndCIsIm9yZGVyQnkiLCJhc2NlbmRpbmciLCJvcmRlciIsImxpbWl0Iiwib2Zmc2V0IiwiZGF0YSIsImhhbmRsZVN1cGFiYXNlRXJyb3IiLCJtZXNzYWdlIiwiY29kZSIsImRldGFpbHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase-client.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase-server.js":
/*!************************************!*\
  !*** ./src/lib/supabase-server.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createServerSupabaseClient: () => (/* binding */ createServerSupabaseClient)\n/* harmony export */ });\n/* harmony import */ var _clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @clerk/nextjs/server */ \"(rsc)/./node_modules/@clerk/nextjs/dist/esm/app-router/server/auth.js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\n\nconst supabaseUrl = \"https://twiarwghktzljergqfsm.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3aWFyd2doa3R6bGplcmdxZnNtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQwMzUxNzUsImV4cCI6MjA1OTYxMTE3NX0.EOGGJVUQeeAG__KyJA_xkIGUjWhTReGEDWa9JV6LZz8\";\nif (!supabaseUrl || !supabaseAnonKey) {\n    console.error(\"Missing Supabase environment variables\");\n}\n/**\r\n * Tworzy klienta Supabase dla użycia po stronie serwera\r\n * zgodnie z nową integracją Clerk-Supabase\r\n */ function createServerSupabaseClient() {\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey, {\n        async accessToken () {\n            try {\n                // Pobierz instancję auth z Clerk\n                const authInstance = (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_1__.auth)();\n                if (!authInstance) {\n                    console.log(\"No auth instance available in server context\");\n                    return null;\n                }\n                // Zgodnie z nową integracją, nie używamy parametru template\n                return await authInstance.getToken();\n            } catch (error) {\n                console.error(\"Error getting token in server context:\", error);\n                return null;\n            }\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3N1cGFiYXNlLXNlcnZlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNEM7QUFDUztBQUVyRCxNQUFNRSxjQUFjQywwQ0FBb0M7QUFDeEQsTUFBTUcsa0JBQWtCSCxrTkFBeUM7QUFFakUsSUFBSSxDQUFDRCxlQUFlLENBQUNJLGlCQUFpQjtJQUNwQ0UsUUFBUUMsS0FBSyxDQUFDO0FBQ2hCO0FBRUE7OztDQUdDLEdBQ00sU0FBU0M7SUFDZCxPQUFPVCxtRUFBWUEsQ0FDakJDLGFBQ0FJLGlCQUNBO1FBQ0UsTUFBTUs7WUFDSixJQUFJO2dCQUNGLGlDQUFpQztnQkFDakMsTUFBTUMsZUFBZVosMERBQUlBO2dCQUN6QixJQUFJLENBQUNZLGNBQWM7b0JBQ2pCSixRQUFRSyxHQUFHLENBQUM7b0JBQ1osT0FBTztnQkFDVDtnQkFFQSw0REFBNEQ7Z0JBQzVELE9BQU8sTUFBTUQsYUFBYUUsUUFBUTtZQUNwQyxFQUFFLE9BQU9MLE9BQU87Z0JBQ2RELFFBQVFDLEtBQUssQ0FBQywwQ0FBMENBO2dCQUN4RCxPQUFPO1lBQ1Q7UUFDRjtJQUNGO0FBRUoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncm91cHNoYXJlLXByb2plY3QvLi9zcmMvbGliL3N1cGFiYXNlLXNlcnZlci5qcz9mYTE3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGF1dGggfSBmcm9tICdAY2xlcmsvbmV4dGpzL3NlcnZlcic7XHJcbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XHJcblxyXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDtcclxuY29uc3Qgc3VwYWJhc2VBbm9uS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVk7XHJcblxyXG5pZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUFub25LZXkpIHtcclxuICBjb25zb2xlLmVycm9yKCdNaXNzaW5nIFN1cGFiYXNlIGVudmlyb25tZW50IHZhcmlhYmxlcycpO1xyXG59XHJcblxyXG4vKipcclxuICogVHdvcnp5IGtsaWVudGEgU3VwYWJhc2UgZGxhIHXFvHljaWEgcG8gc3Ryb25pZSBzZXJ3ZXJhXHJcbiAqIHpnb2RuaWUgeiBub3fEhSBpbnRlZ3JhY2rEhSBDbGVyay1TdXBhYmFzZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNlcnZlclN1cGFiYXNlQ2xpZW50KCkge1xyXG4gIHJldHVybiBjcmVhdGVDbGllbnQoXHJcbiAgICBzdXBhYmFzZVVybCxcclxuICAgIHN1cGFiYXNlQW5vbktleSxcclxuICAgIHtcclxuICAgICAgYXN5bmMgYWNjZXNzVG9rZW4oKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIC8vIFBvYmllcnogaW5zdGFuY2rEmSBhdXRoIHogQ2xlcmtcclxuICAgICAgICAgIGNvbnN0IGF1dGhJbnN0YW5jZSA9IGF1dGgoKTtcclxuICAgICAgICAgIGlmICghYXV0aEluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdObyBhdXRoIGluc3RhbmNlIGF2YWlsYWJsZSBpbiBzZXJ2ZXIgY29udGV4dCcpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gWmdvZG5pZSB6IG5vd8SFIGludGVncmFjasSFLCBuaWUgdcW8eXdhbXkgcGFyYW1ldHJ1IHRlbXBsYXRlXHJcbiAgICAgICAgICByZXR1cm4gYXdhaXQgYXV0aEluc3RhbmNlLmdldFRva2VuKCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgdG9rZW4gaW4gc2VydmVyIGNvbnRleHQ6JywgZXJyb3IpO1xyXG4gICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgKTtcclxufSJdLCJuYW1lcyI6WyJhdXRoIiwiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VBbm9uS2V5IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJjb25zb2xlIiwiZXJyb3IiLCJjcmVhdGVTZXJ2ZXJTdXBhYmFzZUNsaWVudCIsImFjY2Vzc1Rva2VuIiwiYXV0aEluc3RhbmNlIiwibG9nIiwiZ2V0VG9rZW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase-server.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@clerk","vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/tslib","vendor-chunks/webidl-conversions","vendor-chunks/cookie","vendor-chunks/map-obj","vendor-chunks/no-case","vendor-chunks/lower-case","vendor-chunks/snakecase-keys","vendor-chunks/snake-case","vendor-chunks/dot-case"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Foffers%2Froute&page=%2Fapi%2Foffers%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Foffers%2Froute.js&appDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShareClerk_Supabase%5Cgroupshare-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShareClerk_Supabase%5Cgroupshare-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();